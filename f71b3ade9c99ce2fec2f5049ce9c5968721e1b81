Revision: f71b3ade9c99ce2fec2f5049ce9c5968721e1b81
Base-for-patch-set: 4
File: runtime/dex_file.cc

839:23-839:40
Tue Dec 15 08:58:29 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 65acceb5_de8cc5b0
Bytes: 211
Why this change? I'm especially asking for the debugger.

Before, we would ignore parameters that have no name (kDexNoIndex). Now we no longer ignore them and local_in_reg[arg_reg].name_ == nullptr in this case.

839:23-839:40
Tue Dec 15 11:10:13 2015 +0000
Author: David Srbecky <1065473@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 65acceb5_de8cc5b0
UUID: c55c9a66_bcc26d07
Bytes: 503
It is to make it consistent with variables emitted below.
The dex spec say that any of name/type/signature can be kDexNoIndex.  We filter out no name here, but not below.

Furthermore, having this conditional only removes the initialization.  The debug stream could still emit the (uninitialized) variable if the scoping is non-trivial.

I would prefer if the Decode method did just the decoding, and did not mangle or filter the data on the way.  Should we add filter out null name/type in debugger.cc?

839:23-839:40
Tue Dec 15 11:31:06 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c55c9a66_bcc26d07
UUID: e5599e74_1a971d6c
Bytes: 339
I think the debugger (ART) would be fine, now you handle nullptr in expandBufAddUtf8String. However, I wonder how the IDE would behave if we give him variables that have no name.

I don't know when name_idx == kDexNoIndex if there is debug information. Maybe we can keep it this way and see if we need more filtering in the debugger later.

