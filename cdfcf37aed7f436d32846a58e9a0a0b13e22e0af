Revision: cdfcf37aed7f436d32846a58e9a0a0b13e22e0af
Patch-set: 1
File: runtime/elf_file.cc

74
Fri Jan 24 14:50:17 2014 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 523e72eb_62f038b9
Bytes: 52
On 32-bit systems, you're dropping the high 32 bits.

74
Fri Jan 24 15:34:33 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 523e72eb_62f038b9
UUID: 72b456b0_3d8ec369
Bytes: 277
Agreed, this is why I'm using static_cast. In the code below the sizes in the elf file are all computed as size_t and for the sake of comparisons this type is the most convenient. We do pass the length through to MemMap, but we re-read it if we're trying to map the whole file.

74
Fri Jan 24 15:38:01 2014 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 72b456b0_3d8ec369
UUID: 523e72eb_82029cd2
Bytes: 90
Do we want to support files with size 2^32+x where 0 <= x < sizeof(llvm::ELF::Elf32_Ehdr)?

74
Fri Jan 24 15:40:03 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 523e72eb_82029cd2
UUID: 92bf0a8c_c8a8026e
Bytes: 36
I'd say, not today on 32bit systems.

643
Fri Jan 24 14:50:17 2014 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 12407a74_009de89a
Bytes: 19
Dropping high bits.

643
Fri Jan 24 15:34:33 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 12407a74_009de89a
UUID: 92bf0a8c_a8ab4e68
Bytes: 82
This was being consistent with the code above and adding in a missing error check.

