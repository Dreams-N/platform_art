Revision: 9450c6c25833e8353e436bbd0491ed96cd80f34f
Patch-set: 2
File: runtime/thread_list.cc

952:0-953:83
Sun Nov 08 13:42:32 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b6127ed6_8c4967b6
Bytes: 119
Could we instead make both those requests (SuspendAllForDebugger and Dbg::Disconnected) only come from the jdwp thread?

952:0-953:83
Mon Nov 09 09:30:29 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b6127ed6_8c4967b6
UUID: 9609fab1_cef197c4
Bytes: 128
Dbg::Disconnected() is called by the JDWP thread only. SuspendAllForDebugger is called by any thread (including the JDWP thread)

952:0-953:83
Mon Nov 09 09:36:47 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 9609fab1_cef197c4
UUID: 760c86c0_aae08fbc
Bytes: 281
Perhaps the scheme "suspend all + SetStateUnsafe(kRunnable)" is just wrong?

The debugger uses that to execute some code (like instrumentation update) when all others threads are suspended. But I think some of the executed code asserts the current thread is in the kRunnable state.

