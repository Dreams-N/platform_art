Revision: 5302bf93102bfaa9feb6e3ab10ba0204c3b5d4f5
Patch-set: 6
File: compiler/optimizing/intrinsics_mips64.cc

897:14-897:20
Thu May 26 01:42:20 2016 +0000
Author: Alexey Frunze <1057043@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9c83ef1c_ea8187a3
Bytes: 5
Amend

907:64-908:21
Thu May 26 01:42:20 2016 +0000
Author: Alexey Frunze <1057043@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9c83ef1c_2a539f34
Bytes: 7
amended

907:64-908:21
Tue May 31 23:52:52 2016 +0000
Author: Chris Larsen <1071873@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 9c83ef1c_2a539f34
UUID: bca6f325_3f99af91
Bytes: 4
Done

910:0-917:6
Thu May 26 01:42:20 2016 +0000
Author: Alexey Frunze <1057043@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9c83ef1c_ca5be345
Bytes: 238
You won't be able to just remove this piece of code when the bug is fixed. The reason is that for large positive "in" (including +INF) for which "out" becomes max, "in - out" can be larger than 0.5 and adding 1 to "out" will be incorrect.

910:0-917:6
Tue May 31 23:52:52 2016 +0000
Author: Chris Larsen <1071873@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 9c83ef1c_ca5be345
UUID: bca6f325_3a589d7c
Bytes: 6
Noted.

946:0-946:25
Thu May 26 01:42:20 2016 +0000
Author: Alexey Frunze <1057043@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c3ed74a_b1dedf7e
Bytes: 7
Remove.

946:0-946:25
Tue May 31 23:52:52 2016 +0000
Author: Chris Larsen <1071873@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5c3ed74a_b1dedf7e
UUID: bca6f325_1a55e142
Bytes: 4
Done

989:0-989:26
Thu May 26 01:42:20 2016 +0000
Author: Alexey Frunze <1057043@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c3ed74a_71e8571c
Bytes: 7
Remove.

989:0-989:26
Tue May 31 23:52:52 2016 +0000
Author: Chris Larsen <1071873@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5c3ed74a_71e8571c
UUID: bca6f325_5a4f69b0
Bytes: 4
Done

993:0-993:28
Thu May 26 01:42:20 2016 +0000
Author: Alexey Frunze <1057043@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c3ed74a_91c87bbc
Bytes: 160
(D)mfc1's will set AT to all ones when Cmp.cond yield true (or all zeroes otherwise). So you can subtract AT instead of adding TMP:

    __ Dsubu(out, out, AT);

993:0-993:28
Tue May 31 23:52:52 2016 +0000
Author: Chris Larsen <1071873@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5c3ed74a_91c87bbc
UUID: bca6f325_9ac71125
Bytes: 4
Done

995:0-995:27
Thu May 26 01:42:20 2016 +0000
Author: Alexey Frunze <1057043@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5c3ed74a_b1c57fa2
Bytes: 37
Change to

    __ Subu(out, out, AT);

995:0-995:27
Tue May 31 23:52:52 2016 +0000
Author: Chris Larsen <1071873@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5c3ed74a_b1c57fa2
UUID: bca6f325_facc554a
Bytes: 4
Done

