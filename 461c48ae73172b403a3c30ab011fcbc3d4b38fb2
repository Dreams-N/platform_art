Revision: 461c48ae73172b403a3c30ab011fcbc3d4b38fb2
Patch-set: 17
File: compiler/dex/mir_method_info.cc

97:0-99:56
Thu Feb 19 11:51:40 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 48fb3a34_de6c459b
Bytes: 334
If this yields an interface method, we should change the invoke_type to kInterface. We should still try to resolve the actual virtual method that the quickened opcode calls to determine target method (sharp_type = kVirtual on success). And the devirtualization in IsFastInvoke(..., devirt_target, ...) below doesn't make sense at all.

97:0-99:56
Thu Feb 19 18:42:09 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 48fb3a34_de6c459b
UUID: 685d5e31_2787baaf
Bytes: 188
The interface trampolines rely on reading the dex code to handle interface dispatch, which doesn't work in this case. Maybe its addressable in another CL, but its not clear how to do this.

97:0-99:56
Thu Feb 19 18:49:05 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 685d5e31_2787baaf
UUID: 4897ba02_5e3935fe
Bytes: 99
What interface trampolines? With sharp_type == kVirtual, we should use the virtual method dispatch.

97:0-99:56
Thu Feb 19 19:13:09 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4897ba02_5e3935fe
UUID: 48809ac4_567cb44f
Bytes: 90
I just tried that an it works, I think last time I had tried changing the it->invoke_type.

101:0-104:32
Thu Feb 19 11:51:40 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 48fb3a34_def1e59c
Bytes: 135
These flags are for CompilerDriver's internal use. You need to ask CompilerDriver to provide the correct flags for dequickened invokes.

101:0-104:32
Thu Feb 19 18:42:09 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 48fb3a34_def1e59c
UUID: 685d5e31_87db069d
Bytes: 56
Deleted the flags, they aren't required anymore I think.

File: compiler/dex/quick/quick_compiler.cc

546:7-546:18
Thu Feb 19 11:51:40 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 28f8c637_fdc5c713
Bytes: 46
You mean "Disable some optimizations for JIT".

546:7-546:18
Thu Feb 19 18:42:09 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 28f8c637_fdc5c713
UUID: e8486e7a_639ec2d6
Bytes: 4
Done

548:4-548:49
Thu Feb 19 11:51:40 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 48fb3a34_beee19b7
Bytes: 55
Also kGlobalValueNumbering and kGvnDeadCodeElimination.

548:4-548:49
Thu Feb 19 18:42:09 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 48fb3a34_beee19b7
UUID: 48525a24_094e0d80
Bytes: 143
I disabled these with 
pass_manager_options->SetDisablePassList("GVN,DCE") in jit_compiler.cc, there wasn't an option for kLocalValueNumbering.

