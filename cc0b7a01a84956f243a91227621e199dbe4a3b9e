Revision: cc0b7a01a84956f243a91227621e199dbe4a3b9e
Patch-set: 1
File: runtime/jdwp/jdwp_event.cc

637:8-637:16
Tue Feb 24 17:31:54 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c5b475e0_dab4a5fa
Bytes: 149
Can you use a ScopedThreadStateChange instead? Using SetState directly is not very safe and should be avoided. In this case it would work, but still.

637:8-637:16
Tue Feb 24 18:02:07 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c5b475e0_dab4a5fa
UUID: 85aefd91_78e72132
Bytes: 369
I could use two ScopedThreadStateChange: one for the event reporting (kWaitingForDebuggerSend) and one for the suspension (kSuspended). The only difference is the extra transition to kRunnable in between. That'd mean the thread could suspend in that transition if another thread fires an event suspending all threads. I don't think that's an issue for debugging though.

637:8-637:16
Tue Feb 24 18:11:19 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 85aefd91_78e72132
UUID: e5bed9c5_932dbcbb
Bytes: 187
ScopedThreadStateChange doesn't go into runnable if you area already suspended? E.g.

{

ScopedThreadStateChange tsc(self, kSuspended);
SuspendByPolicy(suspend_policy, thread_self_id);

}

637:8-637:16
Wed Feb 25 16:29:37 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e5bed9c5_932dbcbb
UUID: 05720d91_b4a220ba
Bytes: 4
Done

