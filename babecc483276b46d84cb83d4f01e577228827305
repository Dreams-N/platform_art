Revision: babecc483276b46d84cb83d4f01e577228827305
Base-for-patch-set: 3
File: runtime/parsed_options.cc

105:0-111:3
Wed Feb 04 23:36:02 2015 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 3c400875_1d039387
Bytes: 30
Is this logic being preserved?

105:0-111:3
Wed Feb 04 23:40:20 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 3c400875_1d039387
UUID: 3c400875_fde22750
Bytes: 550
Yes,

collector_type_ has the default set in XGcOption constructor
background_collector_type has the default set in BackgroundGcOption constructor
interpreter_only has the default set in runtime_options.def

Basically primitives have their defaults set directly in runtime_options.def and everything else is in the default constructor of the type.

We could do it all in runtime_options.def but then the default values become many lines instead of 1 line, and T{} no longer reflects defaults which seems counter-intuitive. Either way is fine with me.

105:0-111:3
Wed Feb 04 23:53:07 2015 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 3c400875_fde22750
UUID: 3c400875_c0302017
Bytes: 146
I see.

I see UseTLAB is a Unit type. How would temporarily I change it to hard-code/override use_tlab_ = true now like I was able to here before?

105:0-111:3
Thu Feb 05 00:07:15 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 3c400875_c0302017
UUID: 3c400875_002cc892
Bytes: 602
Apologies, I thought the // use_tlab = true was some dead code someone forgot to remove.

In runtime.cc where it initializes 'new gc::Heap' there's

    runtime_options.Exists(Opt::UseTLAB),

which checks if the user passed in the 'USETLAB' flag via the options.

Change that to prepend 'kUseReadBarrier || ' if you want to hardcode it for development.

   kUseReadBarrier || runtime_options.Exists(Opt::UseTLAB)

We can also just change the UseTLAB type to be a bool and then set the default to 'kUseReadBarrier', but then we need to change that line to 'GetOrDefault(Opt::UseTLAB)' instead of Exists.

