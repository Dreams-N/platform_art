Revision: effbfba86549b2b85a2a48cfc4fd25b976bd985b
Patch-set: 1
File: Android.mk

122:0-122:32
Wed May 27 18:33:05 2015 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0d5f9dfa_85ff8176
Bytes: 90
so the .PHONY is enough? I'd expected an empty test-art-target-sync definition in the else

122:0-122:32
Wed May 27 18:36:19 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5f9dfa_85ff8176
UUID: ad73f192_7ebdc5a1
Bytes: 231
I don't understand the whole thing, anyways. If you did not compile, there are no changes, so sync will be empty and fast. If there are changes, what are you trying to accomplish by re-using old binaries?

Could you please explain?

122:0-122:32
Wed May 27 20:45:53 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5f9dfa_85ff8176
UUID: ed8889a6_3e0ee0e8
Bytes: 85
Good catch. I guess apparently the .PHONY is enough, as it worked. I'll double check.

122:0-122:32
Wed May 27 20:45:53 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ad73f192_7ebdc5a1
UUID: ad3851b1_8db7c11a
Bytes: 690
It's for the case we are push instead of sync (see line 131), which is used by the buildbot. The way the buildbot runs is by invoking multiple times make:
1) target gtest
2) run-test for optimizing
3) run-test for quick
4) run-test for interpreter

Invoking make multiple times is to better triage failures. And since any target test has a dependency to test-art-target-sync, the sync (which is actually a push for the buildbot) is always happening. So my plan is:

1) Step1: m -j32 build-art-target-test

2) Step2: m -j32 test-art-target-sync

3) Step3: ART_TEST_NO_SYNC=true m -j32 test-art-target-gtest

4) Step4: ART_TEST_NO_SYNC=true m -j32 test-art-target-run-test-optimizing

5) ....

