Revision: f686c3feabe3519bedd1f3001e5dd598f46946ef
Patch-set: 3
File: runtime/arch/arm64/quick_entrypoints_arm64.S

1926:4-1926:36
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b9a53384_a4c2a29c
Bytes: 329
This can overflow. It think the check should be

  available = end - pos;
  if (available < data_offset) goto slow_path;
  if (((available - data_offset) >> shift) < count) goto slow_path;

Use SUBS for the first check, CMP shifted register for the second.
Calculate data_offset = (MIRROR_INT_ARRAY_DATA_OFFSET + 1 + shift) & ~3.

1926:4-1926:36
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b9a53384_a4c2a29c
UUID: b977f3bf_8cc1cd4f
Bytes: 67
xCount is a 32 bit integer as input, I don't think it can overflow.

1932
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d9aca770_a59b7eb6
Bytes: 78
Assert that MIRROR_LONG_ARRAY_DATA_OFFSET == MIRROR_INT_ARRAY_DATA_OFFSET + 4.

1932
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d9aca770_a59b7eb6
UUID: b977f3bf_3097a336
Bytes: 4
Done

1934:0-1937:53
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 99478f8f_bb154751
Bytes: 4
LDP?

1934:0-1937:53
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 99478f8f_bb154751
UUID: b977f3bf_4ca3b5b0
Bytes: 53
Follow up CL? We don't do this load other places yet.

1944
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5936f710_a1b87e29
Bytes: 18
Where is the "+7"?

1944
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5936f710_a1b87e29
UUID: b977f3bf_efd153c9
Bytes: 52
Its done above with the MIRROR_INT_ARRAY_DATA_OFFSET

2119:8-2119:9
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 990eaf7b_43526669
Bytes: 1
4

2119:8-2119:9
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 990eaf7b_43526669
UUID: b977f3bf_0fb04fd6
Bytes: 4
Done

2145:4-2145:22
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b94a9396_9cb8452a
Bytes: 61
This should not be here. It makes the code below unreachable.

2145:4-2145:22
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b94a9396_9cb8452a
UUID: b977f3bf_6f222311
Bytes: 23
Oops was for debugging.

2153:0-2155:22
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b9a53384_24b7923e
Bytes: 63
Why not

  ldp    x2, xLR, [sp, #16]
  ldp    x0, x1, [sp], #32

2153:0-2155:22
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b9a53384_24b7923e
UUID: b977f3bf_0f65af49
Bytes: 4
Done

2158:7-2158:28
Mon Aug 08 13:35:04 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 39b223c6_082f0790
Bytes: 43
This comment is misleading if \is_resolved.

2158:7-2158:28
Mon Aug 08 22:35:19 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 39b223c6_082f0790
UUID: b977f3bf_0f0ccf8f
Bytes: 4
Done

