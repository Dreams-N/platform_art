Revision: eeeb34761cb0f2942f54fe6196cd37d964c03a52
Patch-set: 4
File: compiler/optimizing/code_generator_arm.cc

3878:19-3878:34
Wed Apr 22 15:16:49 2015 +0000
Author: Calin Juravle <1022077@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 50984e8f_450fbc33
Bytes: 432
You can skip this if !obj->CanBeNull() (obj = instruction_->InAt(0).

So it should be smth like
if (obj->CanBeNull() || instruction->MustDoNullCheck()).

So given that you need to do an || here I'm thinking that  maybe "MustDoNullCheck" is not the best name either. I don't have a better naming suggestion though.

The alternative is to SetMustDoNullCheck() when the input cannot be null but I also don't know a good place to do it.

3878:19-3878:34
Wed Apr 22 16:12:20 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 50984e8f_450fbc33
UUID: 9070061a_871488c7
Bytes: 96
But the point is that you can not trust the input, so what Guillaume is doing looks right to me.

3878:19-3878:34
Wed Apr 22 16:17:55 2015 +0000
Author: Guillaume Sanchez <1068522@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 9070061a_871488c7
UUID: b088aa37_70d2ee04
Bytes: 4
Done

File: compiler/optimizing/nodes.h

3352:2-3352:34
Wed Apr 22 15:16:49 2015 +0000
Author: Calin Juravle <1022077@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 90972654_8f7019d7
Bytes: 103
Don't think it's needed. There are a lot of other stuff we have for codegen and we don't document them.

3352:2-3352:34
Wed Apr 22 16:12:20 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 90972654_8f7019d7
UUID: 706b9231_6676b085
Bytes: 98
I suggested it. It avoids confusing readers that might thing it's the same as Input(0)->CanBeNull.

File: compiler/optimizing/prepare_for_register_allocation.cc

45:35-45:49
Wed Apr 22 15:16:49 2015 +0000
Author: Calin Juravle <1022077@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 90972654_affb15b9
Bytes: 50
you need to do the same for the null check, right?

45:35-45:49
Wed Apr 22 16:17:55 2015 +0000
Author: Guillaume Sanchez <1068522@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 90972654_affb15b9
UUID: 90972654_ef227d9c
Bytes: 4
Done

