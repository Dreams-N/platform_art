Revision: 6f340896e8ef0a4c9aded14a8d932e259733916d
Patch-set: 6
File: compiler/optimizing/builder.cc

165:37-166:61
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 84c53226_d1e9a6ef
Bytes: 70
one per line (and the new... can be on the same line as the variable).

165:37-166:61
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 84c53226_d1e9a6ef
UUID: 2461e61f_b3ad78d5
Bytes: 4
Done

176:38-177:68
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 247566b9_f6e61e1d
Bytes: 5
ditto

176:38-177:68
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 247566b9_f6e61e1d
UUID: c4dbaa04_73ea3a20
Bytes: 4
Done

325:63-325:84
Thu Sep 03 11:38:37 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2461e61f_d39d9427
Bytes: 81
Do we really want to use this location?  Or should we use kNoDexPc for this case?

325:63-325:84
Thu Sep 03 11:50:15 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2461e61f_d39d9427
UUID: e4d42ed5_9498eaf7
Bytes: 152
Please explain.
I would like to avoid kNoDexPc as much as possible. Please use kNoDexPc only if we absolutely sure the instruction will not get lowered.

325:63-325:84
Thu Sep 03 12:13:41 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e4d42ed5_9498eaf7
UUID: 8480d2c5_192c2fc8
Bytes: 197
From what I understand, the location (Dex PC) of this "synthesized" HTryBoundary could either be `predecessor->GetDexPc()` or `successor->GetDexPc()`.  What made you choose `successor->GetDexPc()`?

325:63-325:84
Thu Sep 03 12:30:01 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8480d2c5_192c2fc8
UUID: 04d222e7_1555d639
Bytes: 127
I could use only one and did not want to use kNoDexPc. So my choice was arbitrary. Please propose whatever you think is better.

2741:32-2742:47
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a46956e6_9a96e939
Bytes: 12
one per line

2741:32-2742:47
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a46956e6_9a96e939
UUID: a46956e6_dafa217d
Bytes: 4
Done

2747:39-2748:53
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 84c53226_f1e6221d
Bytes: 5
ditto

2747:39-2748:53
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 84c53226_f1e6221d
UUID: e4d42ed5_b46c0e8d
Bytes: 4
Done

File: compiler/optimizing/nodes.cc

200
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c4dbaa04_b39ae2d4
Bytes: 54
Maybe don't change this file, for simplifying reviews.

File: compiler/optimizing/nodes.h

2378:57-2378:69
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8480d2c5_f914d37c
Bytes: 27
Argument must be mandatory.

2378:57-2378:69
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8480d2c5_f914d37c
UUID: 247566b9_f614de7c
Bytes: 4
Done

2596:49-2597:86
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c4dbaa04_d3a3e614
Bytes: 55
indentation is off here and all other Evaluate methods.

2596:49-2597:86
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c4dbaa04_d3a3e614
UUID: 8480d2c5_b93c1bf7
Bytes: 4
Done

2780:25-2781:69
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 84c53226_91e31e0c
Bytes: 12
one per line

2780:25-2781:69
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 84c53226_91e31e0c
UUID: 8480d2c5_39a80b7b
Bytes: 4
Done

3436:7-3437:33
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 84c53226_51fdb6a7
Bytes: 12
one per line

3436:7-3437:33
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 84c53226_51fdb6a7
UUID: 2461e61f_53906480
Bytes: 4
Done

3461:7-3462:33
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2461e61f_93fcbce1
Bytes: 12
One per line

3461:7-3462:33
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2461e61f_93fcbce1
UUID: a455d63a_f76fe07f
Bytes: 4
Done

3484:8-3485:33
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a46956e6_5a8051e9
Bytes: 12
One per line

3484:8-3485:33
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a46956e6_5a8051e9
UUID: c4dbaa04_530cd6b6
Bytes: 4
Done

3509:7-3510:33
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e4d42ed5_7459c6fe
Bytes: 12
one per line

3509:7-3510:33
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e4d42ed5_7459c6fe
UUID: 247566b9_1655da39
Bytes: 4
Done

3579:61-3579:72
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2461e61f_b3ff38d5
Bytes: 31
No, argument must be mandatory.

3579:61-3579:72
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2461e61f_b3ff38d5
UUID: a4deb6f4_b2273e77
Bytes: 4
Done

3811:19-3812:43
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c4dbaa04_731c7a00
Bytes: 12
one per line

3811:19-3812:43
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c4dbaa04_731c7a00
UUID: a455d63a_17ced4ee
Bytes: 4
Done

4025:43-4025:69
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8480d2c5_d917977f
Bytes: 35
No, the argument must be mandatory.

4025:43-4025:69
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8480d2c5_d917977f
UUID: 84c53226_b13c1af7
Bytes: 4
Done

4161:94-4161:102
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c4dbaa04_939d5ed1
Bytes: 13
lien too long

4161:94-4161:102
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c4dbaa04_939d5ed1
UUID: 84c53226_5199366f
Bytes: 4
Done

4199:30-4199:38
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2461e61f_d3f634fd
Bytes: 9
mandatory

4199:30-4199:38
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2461e61f_d3f634fd
UUID: 8480d2c5_b993bb48
Bytes: 4
Done

4292:76-4292:84
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2461e61f_f3f9b0ef
Bytes: 9
mandatory

4292:76-4292:84
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2461e61f_f3f9b0ef
UUID: 84c53226_719eb25a
Bytes: 4
Done

4374:31-4374:39
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a455d63a_173254bf
Bytes: 9
mandatory

4374:31-4374:39
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a455d63a_173254bf
UUID: 2461e61f_136d4c3e
Bytes: 4
Done

4455:84-4455:95
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e4d42ed5_d4475215
Bytes: 9
mandatory

4455:84-4455:95
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e4d42ed5_d4475215
UUID: c4dbaa04_13064e95
Bytes: 4
Done

4493:55-4493:72
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8480d2c5_99111f8c
Bytes: 9
mandatory

4493:55-4493:72
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8480d2c5_99111f8c
UUID: a455d63a_57d84cb1
Bytes: 4
Done

4650:13-4650:41
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 247566b9_96e32a0c
Bytes: 27
Argument must be mandatory.

4741:31-4741:39
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a455d63a_372dd85f
Bytes: 9
mandatory

4741:31-4741:39
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a455d63a_372dd85f
UUID: 247566b9_b6650629
Bytes: 4
Done

4801:80-4801:88
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c4dbaa04_f3a06a0a
Bytes: 9
mandatory

4801:80-4801:88
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c4dbaa04_f3a06a0a
UUID: a4deb6f4_32534edf
Bytes: 4
Done

File: compiler/optimizing/nodes_test.cc

27
Thu Sep 03 11:19:39 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a46956e6_1a7ad9b7
Bytes: 43
I don't think you need to change this file.

27
Thu Sep 03 11:50:15 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a46956e6_1a7ad9b7
UUID: a4deb6f4_d2f20264
Bytes: 104
In future, I'm going to change optional dex_pc to mandatory.
If you do not mind, I would keep this file.

27
Thu Sep 03 12:14:29 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a4deb6f4_d2f20264
UUID: c4dbaa04_f34e2a02
Bytes: 111
Why mandatory? I thought we agreed we are not going to require all code that creates nodes to provide a dex pc.

27
Thu Sep 03 12:30:01 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c4dbaa04_f34e2a02
UUID: 04d222e7_d55e6e5d
Bytes: 283
When we finish adding dex_pc params to all new instruction allocations (new patch sets will be needed), we will be able to make this parameter mandatory. From that moment all new code with allocations will have to set dex_pc. This will allow us to keep dex_pc coverage close to 100%.

27
Thu Sep 03 13:20:11 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 04d222e7_d55e6e5d
UUID: a455d63a_1767f4ae
Bytes: 221
That is not our goal. We agreed doing it in the builder was acceptable. Propagating it to optimization passes is still controversial in terms of need versus complexity, so I wouldn't expect it to happen in the short term.

27
Mon Sep 07 11:54:50 2015 +0000
Author: Yevgeny Y Rouban <1037563@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a455d63a_1767f4ae
UUID: 8480d2c5_598067e9
Bytes: 2
ok

