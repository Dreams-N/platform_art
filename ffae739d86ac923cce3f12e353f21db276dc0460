Revision: ffae739d86ac923cce3f12e353f21db276dc0460
Patch-set: 1
File: /COMMIT_MSG

9:17-9:24
Fri Sep 25 16:22:53 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4e4c398b_99292750
Bytes: 20
There is no VM spec.

9:17-9:24
Fri Sep 25 16:33:47 2015 +0000
Author: David Brazdil <1059815@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4e4c398b_99292750
UUID: 8ec8f176_f6e1803d
Bytes: 4
Done

9:17-9:24
Fri Sep 25 16:37:12 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8ec8f176_f6e1803d
UUID: ee616dea_52fee52a
Bytes: 161
You can reference the dalvik spec, but we don't have a "VM spec"... :-)

You'd reference "packed-switch-payload format" in "Dalvik bytecode" / "Bytecode Format."

10:34-10:47
Fri Sep 25 16:22:53 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8e52b121_b502aa14
Bytes: 13
sparse-switch

10:34-10:47
Fri Sep 25 16:33:47 2015 +0000
Author: David Brazdil <1059815@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8e52b121_b502aa14
UUID: eececd75_a176de14
Bytes: 4
Done

10:60-11:6
Fri Sep 25 16:22:53 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ae5bf53d_869bff66
Bytes: 13
packed-switch

10:60-11:6
Fri Sep 25 16:33:47 2015 +0000
Author: David Brazdil <1059815@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ae5bf53d_869bff66
UUID: 8ec8f176_160efcb1
Bytes: 4
Done

File: runtime/verifier/method_verifier.cc

1333:2-1333:32
Fri Sep 25 16:21:38 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ce582944_3dc1031e
Bytes: 9
constexpr

1333:2-1333:32
Fri Sep 25 16:33:47 2015 +0000
Author: David Brazdil <1059815@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ce582944_3dc1031e
UUID: 0eb5e1d9_1dfff7a0
Bytes: 4
Done

1338:6-1339:34
Fri Sep 25 16:21:38 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0e5fa128_ff4fe3ff
Bytes: 189
You can't do it that. This would incur signed-integer overflow, which is undefined behavior in C...

Write it as

  if (first_key > std::numeric_limits<int32_t>::max() - (switch_count - 1))

1338:6-1339:34
Fri Sep 25 16:33:47 2015 +0000
Author: David Brazdil <1059815@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0e5fa128_ff4fe3ff
UUID: 2ebd45ca_76bc8ef0
Bytes: 24
Done. Argh, stupid me...

