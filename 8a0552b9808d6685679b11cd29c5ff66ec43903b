Revision: 8a0552b9808d6685679b11cd29c5ff66ec43903b
Patch-set: 1
File: /COMMIT_MSG

7:0-7:44
Tue Jul 15 04:42:51 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 19f188a2_4e473364
Bytes: 212
my thought was that if the runtime found a -Ximage oat file that contained relocations, it would require them, rather than have to be told via a command line option.

I don't know if others have similar thoughts.

File: build/Android.common_build.mk

212:41-212:51
Tue Jul 15 04:42:51 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 390c8c77_4f5d6d25
Bytes: 202
Like I said on previous CLs, I only want to support positive deltas, so that the base address can be considered a minimum address (which is why I wanted it to be an unsigned size_t value, not an off_t).

File: build/Android.common_test.mk

25:0-26:56
Tue Jul 15 04:42:51 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b9f79c98_ab8a0959
Bytes: 77
i'm fine if we only test relocate. also, do the last two cases exist anymore?

File: compiler/dex/compiler_ir.h

68:0-68:19
Tue Jul 15 04:42:51 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b9f79c98_8b874d51
Bytes: 400
can't this just be an option in the CompilerDrivers's CompilerOptions? and didn't we already add this option there?

the next file seems to indicate this is just a copy of that. if so, can it be cost? also can we add a comment here (like above) that this is just

compiler_driver.GetCompilerOptions().GetIncludePatchInformation();

and perhaps rename it to include_patch_information_ for consistency.

File: compiler/driver/compiler_callbacks_impl.h

45:9-45:15
Tue Jul 15 04:42:51 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 19f188a2_ae3b37e4
Bytes: 65
PreferRelocation seems too optional? perhaps RelocateIfNecessary?

File: compiler/oat_writer.h

82:0-82:38
Tue Jul 15 04:42:51 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 19f188a2_ee353fef
Bytes: 62
again, I've always said we should only have an unsigned delta.

File: test/etc/push-and-run-prebuilt-test-jar

1:0-1:9
Tue Jul 15 04:42:51 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 19f188a2_8e38fbe8
Bytes: 147
not really glad to see a fork of this script. again, I always assumed the runtime would figure out what to do based on what the -Ximage looked like

