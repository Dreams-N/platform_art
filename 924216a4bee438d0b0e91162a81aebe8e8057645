Revision: 924216a4bee438d0b0e91162a81aebe8e8057645
Patch-set: 13
File: compiler/dex/mir_graph.cc

123:19-123:25
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ed8889a6_056b96ee
Bytes: 20
Magic number 999999?

123:19-123:25
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ed8889a6_056b96ee
UUID: 0d031dc0_b78e66fd
Bytes: 4
Done

File: compiler/dex/mir_optimization.cc

409:4-409:43
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_f384905b
Bytes: 94
Instead of this, we should DCHECK(reg_location_ == nullptr) for kCompilerTempSpecialMethodPtr.

409:4-409:43
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_f384905b
UUID: 4d0995dc_71506c62
Bytes: 4
Done

File: compiler/dex/quick/arm64/target_arm64.cc

861:20-861:40
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_d8c7f517
Bytes: 17
UNWIDE(p->opcode)

861:20-861:40
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_d8c7f517
UUID: 0d031dc0_f761feba
Bytes: 4
Done

File: compiler/dex/quick/codegen_util.cc

1301:44-1301:53
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_784a21b3
Bytes: 15
Update comment.

1301:44-1301:53
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_784a21b3
UUID: 4d0995dc_5cc9ffa5
Bytes: 4
Done

File: compiler/dex/type_inference.h

83:16-83:34
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_934d54cc
Bytes: 117
The name doesn't match the result, the function returns kFlagRef. Maybe we should explicitly name this ArtMethodType.

83:16-83:34
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_934d54cc
UUID: cd8f45ac_04547aa6
Bytes: 4
Done

File: compiler/dex/vreg_analysis.cc

61:0-63:3
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_13b81ed7
Bytes: 90
It is unnecessary to eagerly set this, it will be overwritten by the TypeInference anyway.

61:0-63:3
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_13b81ed7
UUID: 0d031dc0_b7d946f7
Bytes: 4
Done

File: compiler/image_writer.cc

850:6-850:65
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_f38bf06f
Bytes: 38
Remove the TODO, the analysis is done.

850:6-850:65
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_f38bf06f
UUID: 4d0995dc_7ca203ab
Bytes: 4
Done

984:2-984:7
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_b3e5ea25
Bytes: 27
Avoid non-const references.

984:2-984:7
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_b3e5ea25
UUID: 4d0995dc_3c140b78
Bytes: 4
Done

990:41-990:68
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_b39178a4
Bytes: 38
bin_slot_previous_sizes_[kBinArtField]

990:41-990:68
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_b39178a4
UUID: cd8f45ac_c4ab72fe
Bytes: 4
Done

996:41-996:74
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ed8889a6_45fbdeb9
Bytes: 44
bin_slot_previous_sizes_[kBinArtMethodClean]

996:41-996:74
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ed8889a6_45fbdeb9
UUID: cd8f45ac_04cd5a04
Bytes: 4
Done

1004:19-1004:29
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_f3d650c7
Bytes: 7
Remove.

1004:19-1004:29
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_f3d650c7
UUID: 0d031dc0_57438a05
Bytes: 4
Done

1342:0-1349:6
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_53b8dc25
Bytes: 53
Remove or enable (and fix typo: "specia"->"special").

1342:0-1349:6
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_53b8dc25
UUID: 0d031dc0_d7b2fa76
Bytes: 4
Done

File: compiler/linker/arm64/relative_patcher_arm64.cc

199:62-199:68
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_d3f06c65
Bytes: 6
or 64-

199:62-199:68
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_d3f06c65
UUID: 0d031dc0_17bd9243
Bytes: 4
Done

File: compiler/optimizing/code_generator.cc

278:7-278:76
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_6e825304
Bytes: 13
Follow-up CL?

278:7-278:76
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_6e825304
UUID: 4d0995dc_fcef33ca
Bytes: 46
Maybe, have a lot of other stuff to do though.

File: compiler/optimizing/code_generator_arm64.cc

2277
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ed8889a6_42af540f
Bytes: 14
Line too long.

2277
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ed8889a6_42af540f
UUID: 4d0995dc_1cff8778
Bytes: 4
Done

File: compiler/optimizing/code_generator_x86.cc

3218
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_4e8b0f21
Bytes: 14
Line too long.

3218
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_4e8b0f21
UUID: 0d031dc0_d714bac8
Bytes: 4
Done

File: compiler/optimizing/optimizing_compiler.cc

635:2-635:76
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ed8889a6_05a3967f
Bytes: 7
Enable.

635:2-635:76
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ed8889a6_05a3967f
UUID: 0d031dc0_97dc0299
Bytes: 4
Done

File: oatdump/oatdump.cc

1405
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_2e2a1b78
Bytes: 14
Line too long.

1405
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_2e2a1b78
UUID: 4d0995dc_7cdfa302
Bytes: 4
Done

1442:6-1442:14
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_b3816ad6
Bytes: 13
static_assert

1442:6-1442:14
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_b3816ad6
UUID: 4d0995dc_9cd6f7ea
Bytes: 4
Done

1524:37-1524:42
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_782ea13a
Bytes: 5
first

1524:37-1524:42
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_782ea13a
UUID: 0d031dc0_77fa0ef1
Bytes: 4
Done

1527:13-1527:31
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_f328103b
Bytes: 13
Follow-up CL?

1527:13-1527:31
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_f328103b
UUID: 8d99cdfb_5cd65d46
Bytes: 3
Yes

File: patchoat/patchoat.cc

480:2-480:31
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_4e04af18
Bytes: 7
Remove.

480:2-480:31
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_4e04af18
UUID: 4d0995dc_9c88b7f2
Bytes: 4
Done

File: runtime/art_method-inl.h

320:2-320:7
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_4eccafb7
Bytes: 33
DCHECK here and many times below.

320:2-320:7
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_4eccafb7
UUID: 4d0995dc_1c75c777
Bytes: 59
Sorry had left these as CHECK to find proxy bugs, will fix.

File: runtime/asm_support.h

72:51-72:52
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_ceb71f1a
Bytes: 46
Is this really 8 even on 32-bit architectures?

72:51-72:52
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_ceb71f1a
UUID: 8d99cdfb_dcf98d95
Bytes: 99
Yes, I made that way since its easier to manage. Not a huge deal since there is only 3 per runtime.

File: runtime/class_linker.cc

1192:10-1192:11
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ed8889a6_a5ad8a9d
Bytes: 7
Remove.

1192:10-1192:11
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ed8889a6_a5ad8a9d
UUID: 8d99cdfb_9c18e577
Bytes: 4
Done

4658:23-4658:32
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_73afe25d
Bytes: 67
You can use this allocator also for miranda_methods and move_table.

4658:23-4658:32
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_73afe25d
UUID: 6d9499c1_7b24ffa9
Bytes: 4
Done

4767:14-4767:74
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_d8fa55f2
Bytes: 7
Remove?

4767:14-4767:74
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_d8fa55f2
UUID: 6d9499c1_bb492795
Bytes: 4
Done

File: runtime/entrypoints/quick/quick_trampoline_entrypoints.cc

329:0-330:27
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_d354ecac
Bytes: 51
What's the purpose of the GetDeclaringClass() here?

329:0-330:27
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_d354ecac
UUID: 4d0995dc_5c661f9d
Bytes: 8
Deleted.

File: runtime/fault_handler.cc

335:2-335:40
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_0e911751
Bytes: 5
TODO?

335:2-335:40
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_0e911751
UUID: 4d0995dc_9c60b77f
Bytes: 19
Yes, its not vital.

File: runtime/gc/accounting/mod_union_table_test.cc

240
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_13e5bed2
Bytes: 58
Why are we not comparing oss.str() and oss2.str() anymore?

240
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_13e5bed2
UUID: 6d9499c1_7bd6bfed
Bytes: 80
It was failing since there ends up being dirty cards caused by the class linker.

File: runtime/mirror/class-inl.h

884:77-884:79
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_73340058
Bytes: 12
pointer_size

884:77-884:79
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_73340058
UUID: 4d0995dc_5caf3f0f
Bytes: 4
Done

File: runtime/mirror/class.cc

804:41-804:60
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2d0c61ed_339e08ae
Bytes: 42
Why not "ArtMethod* (&methods)[kImtSize]"?

804:41-804:60
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2d0c61ed_339e08ae
UUID: 6d9499c1_5b64a3ca
Bytes: 4
Done

File: runtime/thread.cc

1619:0-1621:27
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cdf3c519_38ec193a
Bytes: 71
I don't like mixing the method pointers with dex pcs in the same array.

1619:0-1621:27
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cdf3c519_38ec193a
UUID: 8d99cdfb_9cfaa5f1
Bytes: 98
What do you suggest, an object array fo size 2 with a long/int method array + an int dex pc array?

1619:0-1621:27
Tue May 26 20:59:04 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8d99cdfb_9cfaa5f1
UUID: cdf3c519_c859e0e2
Bytes: 261
Oh, I missed the fact that previously the last element of method_trace_ was a reference to the dex_pc_trace_. If it's necessary to have a single mirror object hold all the data, then this inevitably has to be messy. In that case I'm OK with this implementation.

File: test/001-HelloWorld/src/Main.java

21:4-21:22
Tue May 26 13:08:21 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ed8889a6_05447678
Bytes: 84
Why is this in the HelloWorld? If you want a test with this GC, create another test.

21:4-21:22
Tue May 26 20:45:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ed8889a6_05447678
UUID: 6d9499c1_db75134a
Bytes: 22
Forgot to revert this.

