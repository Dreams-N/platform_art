Revision: ec573cf2451694cfe51ba5a53db5dcabda2f8e9c
Patch-set: 12
File: test/462-checker-inlining-across-dex-files/main.jpp

1
Mon Jul 06 11:36:02 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 13b8a53c_567c642b
Bytes: 22
What is this file for?

1
Mon Jul 06 12:48:02 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 13b8a53c_567c642b
UUID: 13b8a53c_5653c4af
Bytes: 159
It indicates the multidex partitioning. Here we force 'Main' and 'AAA' classes to be in the main DEX file (classes.dex) while other classes go to classes2.dex.

1
Mon Jul 06 13:08:25 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 13b8a53c_5653c4af
UUID: 931655ff_dd151f78
Bytes: 169
That's kind of obscure, and unfortunate we need a Jack specific file every time we need to do this. Why isnt' the directory structure (src and src-multidex) good enough?

1
Mon Jul 06 13:12:10 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 931655ff_dd151f78
UUID: 13b8a53c_f62d981f
Bytes: 355
Because there is a cross reference between Main and OtherDex classes (they both reference each other).

This works with javac using "-implicit:none" command-line option. We cannot do this for Jack using source files.

I can also disable this test for Jack and keep using javac+dx. Or, compile them with javac to get classes, then use jill+jack to compile.

1
Mon Jul 06 13:16:30 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 13b8a53c_f62d981f
UUID: 93abb5ef_12430c15
Bytes: 158
I'd go with disabling jack when there is a src-multidex directory. Otherwise, you'll have to do that extra work and if you don't you'd get surprising outcome.

File: test/etc/default-build

50:39-50:47
Mon Jul 06 11:36:02 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 13b8a53c_b64790f3
Bytes: 19
compiler -> compile

50:39-50:47
Mon Jul 06 12:48:02 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 13b8a53c_b64790f3
UUID: 93abb5ef_d2798471
Bytes: 4
Done

File: test/run-test

606:84-606:91
Mon Jul 06 11:36:02 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 931655ff_7a9e91b2
Bytes: 17
depends -> depend

606:39-606:47
Mon Jul 06 11:36:02 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 13d1858c_8e387f5f
Bytes: 24
same DEX -> the same DEX

606:84-606:91
Mon Jul 06 12:48:02 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 931655ff_7a9e91b2
UUID: 931655ff_7dea0bed
Bytes: 4
Done

606:39-606:47
Mon Jul 06 12:48:02 2015 +0000
Author: Sebastien Hertz <1029223@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 13d1858c_8e387f5f
UUID: 93abb5ef_125cacf8
Bytes: 4
Done

