Revision: 6165e34d0cafa49df75e8e1e5a6d00532e8606c2
Patch-set: 6
File: /COMMIT_MSG

20
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_cc45ef65
Bytes: 118
Maybe add that as a consequence these blocks won't be considered by the various optimization passes (and that's okay)?

File: compiler/optimizing/builder.cc

262:12-262:31
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7e7526b8_9cad8922
Bytes: 162
The role of this method is not clear to me: does it say whether a block ends with a HTryBoundary instruction?  or that the bock only contains such an instruction?

269:71-269:79
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_97b78ec3
Bytes: 18
Nit: dex_pc_start?

269:90-269:96
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_b7b40abf
Bytes: 21
Likewise, dex_pc_end?

270:11-270:13
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7e7526b8_5c9931fe
Bytes: 7
dex_pc?

332:68-332:80
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_7788e2f8
Bytes: 15
neighboring? :)

334:0-334:101
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9ecf3a47_b5172276
Bytes: 15
Nit: long line.

340:43-340:46
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9ecf3a47_75577a2d
Bytes: 5
it's?

348:0-349:40
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7e7526b8_9c86e998
Bytes: 98
Maybe introduce a HTryBoundary ctor taking care of performing

  try_boundary->SetIsTryEntry();

?

367:67-367:79
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_d796761d
Bytes: 6
Ditto.

378:0-379:38
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_ec76ebb6
Bytes: 6
Ditto.

557:12-557:63
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_0c037717
Bytes: 107
Nit: Instead of casting branch_targets_.Size() down to an int32_t, what about casting index up to a size_t?

2243:10-2243:24
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: beecfece_ad44dd1b
Bytes: 45
Maybe rename as `latest_move_result_cursor_`?

File: compiler/optimizing/builder.h

281:2-281:31
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9ecf3a47_75321a32
Bytes: 21
Document this member.

File: compiler/optimizing/code_generator_arm.cc

966:0-983:3
Tue Jun 23 10:09:30 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7e7526b8_2731c27a
Bytes: 42
Can all of this happen for a try boundary?

File: compiler/optimizing/graph_visualizer.cc

247:9-247:10
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: beecfece_ed3ee595
Bytes: 87
Does the "X" stand for "exception"?  If so, the latter should probably be used instead.

247:9-247:10
Tue Jun 23 10:09:30 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: beecfece_ed3ee595
UUID: 7e7526b8_47363e74
Bytes: 5
Agree

263:12-263:13
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7e7526b8_9c2b490c
Bytes: 9
Likewise.

265:16-265:17
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: beecfece_cd3b29a4
Bytes: 9
Likewise?

383:40-385:57
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_ec1b8b78
Bytes: 111
This seems to be a recurring pattern:

  ostr << std::boolalpha << something() << std::noboolalpha;

Factor it?

File: compiler/optimizing/nodes.cc

1041:5-1041:30
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_b762cab6
Bytes: 130
Update the documentation to mention HTryBoundary as well? And/or maybe update the name of this method (IsSingleGotoOrTryBoundary)?

1047:0-1047:85
Tue Jun 23 10:09:30 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_0caff7ee
Bytes: 43
Should HTryBoundary be a subclass of HGoto?

File: compiler/optimizing/nodes.h

697:21-697:32
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_97654ec3
Bytes: 13
Predecessors?

1931:0-1932:16
Tue Jun 23 10:09:30 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_42616206
Bytes: 129
Why not an enum like HMonitorOperation? Also I think you should be able to know at build time whether this wil lbe exit or entry.

File: compiler/utils/growable_array.h

49
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_4c261fc2
Bytes: 46
Maybe add

  DCHECK_LT(start_from, Size());

?

File: test/510-checker-try-catch/smali/Builder.smali

26:13-26:15
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7e7526b8_dc4a21d6
Bytes: 44
Nit: Minus1? (Likewise for other constants.)

53:22-53:33
Tue Jun 23 10:09:30 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_6cb4bb43
Bytes: 29
indentation? (here and below)

687:0-696:13
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_6cd67bf1
Bytes: 40
Isn't the loop missing from this method?

744:4-744:13
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9ecf3a47_d593ce63
Bytes: 22
Is this really needed?

805:4-805:13
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7e7526b8_5cdcd18f
Bytes: 9
Likewise.

809:12-809:35
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_b73baaa4
Bytes: 26
a MOVE_RESULT instruction?

835:12-835:35
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: beecfece_6de95577
Bytes: 9
Likewise.

File: test/510-checker-try-catch/src/Main.java

2:16-2:20
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_4cdbbf15
Bytes: 4
2015

2:0-15:2
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9efbba85_acbfc3ab
Bytes: 19
Indentation is off.

22:42-22:43
Mon Jun 22 15:39:33 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dec53225_77cb0216
Bytes: 18
Nit: remove space?

