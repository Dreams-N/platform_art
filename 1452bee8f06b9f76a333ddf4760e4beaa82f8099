Revision: 1452bee8f06b9f76a333ddf4760e4beaa82f8099
Patch-set: 7
File: runtime/interpreter/mterp/arm/fbinop2addr.S

12
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_b251e0db
Bytes: 22
UBFX r9, rINST, #8, #4

File: runtime/interpreter/mterp/arm/fbinopWide2addr.S

13
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_924e5c3b
Bytes: 22
UBFX r9, rINST, #8, #4

File: runtime/interpreter/mterp/arm/footer.S

148:0-149:24
Tue Jan 12 18:16:19 2016 +0000
Author: Serguei I Katkov <1040038@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e727e6f2_4a76f36f
Bytes: 55
Why do we need this? r0 and r1 seems to be a garbage...

148:0-149:24
Tue Jan 12 18:22:59 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e727e6f2_4a76f36f
UUID: 07623a24_19cbaba2
Bytes: 69
Thanks - you're right.  We don't need those - completely unnecessary.

148:0-149:24
Wed Jan 13 04:16:24 2016 +0000
Author: Serguei I Katkov <1040038@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 07623a24_19cbaba2
UUID: 47ed12c9_6de67567
Bytes: 145
Sorry for late feedback, I'm debugging x86 port of this patch and review the difference between yours and mine code so I found this strange code.

File: runtime/interpreter/mterp/arm/funop.S

13
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_f24b6829
Bytes: 22
UBFX r9, rINST, #8, #4

File: runtime/interpreter/mterp/arm/funopNarrower.S

13
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_d248e42f
Bytes: 22
UBFX r9, rINST, #8, #4

File: runtime/interpreter/mterp/arm/funopWider.S

13
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_32817080
Bytes: 22
UBFX r9, rINST, #8, #4

File: runtime/interpreter/mterp/arm/op_cmp_long.S

9:7-13:35
Tue Mar 08 18:40:18 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_f2fc08cf
Bytes: 417
Misleading comment, for cmp-long(Long.MIN_VALUE, Long.MAX_VALUE) we would get IP=1 but the result of the comparison should be -1.

On the other hand, we could do

  cmp r0, r2       // Same CCs as `sub ip, r0, r2`.
  sbcs ip, r1, r3  // Sets correct CCs for checking LT (but not EQ/NE).
  mov ip, #0
  mvnlt ip, #0     // -1
  cmpeq r0, r2     // For correct EQ/NE, we may need to repeat the first CMP.
  orrne ip, #1

9:7-13:35
Wed Mar 09 22:47:39 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b7fe056e_f2fc08cf
UUID: 570ce9bf_f0e9d164
Bytes: 17
Very nice!  Done.

File: runtime/interpreter/mterp/arm/op_goto.S

8:4-8:43
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_529074c6
Bytes: 85
We're already using UBFX for many other ops, so there's no reason to avoid SBFX here.

8:4-8:43
Wed Mar 09 22:47:39 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b7fe056e_529074c6
UUID: 570ce9bf_70284164
Bytes: 31
Done, and also in op_const_4.S.

10:0-12:69
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_b29440bb
Bytes: 57
SBFX+ADDS, even the comment says that the ADD sets flags.

10:0-12:69
Wed Mar 09 22:47:39 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b7fe056e_b29440bb
UUID: 570ce9bf_105ea5ef
Bytes: 39
Fixed in later CL, but since rewritten.

20:0-22:69
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_92913ccb
Bytes: 5
ditto

20:0-22:69
Wed Mar 09 22:47:39 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b7fe056e_92913ccb
UUID: 570ce9bf_d057edce
Bytes: 39
Fixed in later CL, but since rewritten.

File: runtime/interpreter/mterp/arm/op_instance_of.S

15
Tue Mar 08 18:03:16 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b7fe056e_1286ec97
Bytes: 22
UBFX r9, rINST, #8, #4

15
Wed Mar 09 22:47:39 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b7fe056e_1286ec97
UUID: 570ce9bf_70aba1e9
Bytes: 71
done.  Also: fbinop2addr.S, fbinopWid2addr.S, funopNarrower.S, funop.S,

File: runtime/interpreter/mterp/mterp.cc

277:55-277:58
Mon Jan 25 21:32:55 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 74c64632_225c5600
Bytes: 70
ResolveVerifyAndClinit can cause thread suspension and invalidate obj.

291:56-291:59
Mon Jan 25 21:32:55 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d4be1290_bdd957a5
Bytes: 8
And here

509:34-509:42
Mon Jan 25 21:32:55 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d4be1290_5d97fb6e
Bytes: 13
Indent is off

528:34-528:42
Mon Jan 25 21:32:55 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 74af2662_ba7e393f
Bytes: 13
Indent is off

585:40-585:41
Mon Jan 25 21:32:55 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d4be1290_fdbcaff3
Bytes: 18
Off by one indent.

