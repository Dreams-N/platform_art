Revision: c0f632ebad4c24ffb7c068c0ad357a85233d6add
Patch-set: 1
File: /COMMIT_MSG

7:0-7:39
Tue Mar 08 18:01:39 2016 +0000
Author: Narayan Kamath <1014443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 77080d64_907014aa
Bytes: 135
hate to piss on your parade, but this could do with a better commit message.

"Tweak JIT hotness threshold" or similar might be better.

File: runtime/jit/jit.h

46
Tue Mar 08 17:52:33 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 37af7563_40be3292
Bytes: 270
We'll want to play with this number.  As part of my rework of branch profiling, I've changed the hotness counter to be a signed 16-bit int, so threshold would be capped at 32767.  I could go to 32 bits, but that would involve increasing the shadow frame size by 4 bytes.

46
Tue Mar 08 18:00:23 2016 +0000
Author: Bill Buzbee <1001578@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 37af7563_40be3292
UUID: 37af7563_60600ee0
Bytes: 261
On second thought, I can deal with this as-is.  To speed up branch profiling, I'm caching a countdown value - and that's what's limited to signed 16-bits.  The actual threshold can be as large as you want - I'll just do updates in no-larger-than 16-bit batches.

46
Tue Mar 08 18:07:52 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 37af7563_60600ee0
UUID: b7fe056e_12042cae
Bytes: 105
If it makes things simpler to have that threshold to 0xffff or 0x7ffff, then we might as well go with it.

