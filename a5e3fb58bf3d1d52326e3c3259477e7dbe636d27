Revision: a5e3fb58bf3d1d52326e3c3259477e7dbe636d27
Patch-set: 1
File: runtime/native/java_lang_Class.cc

241:28-241:44
Thu Oct 01 21:17:15 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 354d9aaf_7663d0d4
Bytes: 115
If this returns null because of OOME, we should be careful to not get another OOME causing a recursive throw abort.

241:28-241:44
Thu Oct 01 22:27:03 2015 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 354d9aaf_7663d0d4
UUID: 9555663b_40debffc
Bytes: 34
Added check for pending exception.

246
Thu Oct 01 21:14:21 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 354d9aaf_5654d4f4
Bytes: 80
Is using "fast JNI" compatible with causing a suspend in the middle of the code?

246
Thu Oct 01 21:17:15 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 354d9aaf_5654d4f4
UUID: 9555663b_a0b4fb07
Bytes: 3
Yes

248
Thu Oct 01 21:14:21 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: f5586271_813a9957
Bytes: 304
Why is this inside of the loop instead of outside of the loop?

I have a feeling creating scopes is more expensive over and over again (not less expensive). Unless it's there for correctness?

Also just using a raw mirror::Class pointer at all seems more scary than using h_clazz for the entire function.

248:4-248:11
Thu Oct 01 21:15:22 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d55b5e6b_4259a329
Bytes: 171
If you use this as a mutable handle, why not move the StackHandleScope out of the loop and mutate the handle? There is overhead to installing and removing a handlescope...

248:4-248:11
Thu Oct 01 22:27:03 2015 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d55b5e6b_4259a329
UUID: 15a33681_d861b91b
Bytes: 4
Done

264:52-264:53
Thu Oct 01 21:15:22 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d55b5e6b_a2699fbd
Bytes: 7
Period.

264:19-264:21
Thu Oct 01 21:15:22 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b5526a4f_879910bc
Bytes: 3
the

264:52-264:53
Thu Oct 01 22:27:03 2015 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d55b5e6b_a2699fbd
UUID: 1548969f_478a610e
Bytes: 4
Done

264:19-264:21
Thu Oct 01 22:27:03 2015 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b5526a4f_879910bc
UUID: 15a33681_f85ef55e
Bytes: 4
Done

269:24-269:25
Thu Oct 01 21:15:22 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 953c86f3_14824239
Bytes: 7
Period.

269:24-269:25
Thu Oct 01 22:27:03 2015 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 953c86f3_14824239
UUID: b5526a4f_92314c21
Bytes: 4
Done

276
Thu Oct 01 21:14:21 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 75439281_a5cd1d9e
Bytes: 20
NPE is name is null?

276
Thu Oct 01 21:18:00 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 75439281_a5cd1d9e
UUID: d55b5e6b_a237dfc2
Bytes: 119
Could make this a DCHECK, considering that this is a private method and Class.getField could do this before going here.

276
Thu Oct 01 21:20:31 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d55b5e6b_a237dfc2
UUID: b5398a03_da4ac591
Bytes: 265
Either way is ok with me (with a slight preference towards each method handling its own preconditions, instead of letting the caller handle it), but the javadoc on the java side should probably clearly state what happens since it's in two completely separate files.

276
Thu Oct 01 22:27:03 2015 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 75439281_a5cd1d9e
UUID: 1548969f_2700f50f
Bytes: 4
Done

276
Thu Oct 01 22:27:03 2015 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b5398a03_da4ac591
UUID: 1548969f_07fdf96c
Bytes: 4
Done

