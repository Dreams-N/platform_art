Revision: a51f4a25906bb165942301bb7305defd216c8c7e
Patch-set: 4
File: compiler/optimizing/graph_checker.h

119:5-119:46
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a38a229d_5d165b00
Bytes: 142
I think it's really the cache that bothers me :-) Since we can just look forward for equivalent phis, I think we should just avoid this cache.

File: compiler/optimizing/ssa_builder.cc

175:21-175:23
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6394aac1_dbc513de
Bytes: 16
Too many spaces.

174:2-175:25
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e3617abc_373e188c
Bytes: 9
one line?

208:19-208:23
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6394aac1_fbcacfea
Bytes: 19
here we -> here, we

215:5-217:61
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a38a229d_9d40e3f8
Bytes: 148
I think the comment is misplaced. Here you should just say that non-phi instructions are already correctly typed, so you don't need to process them.

224:10-224:26
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a38a229d_bd459f07
Bytes: 8
No need?

230:0-230:26
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6394aac1_1bb05b70
Bytes: 8
No need?

223:0-232:54
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6394aac1_5bbae34f
Bytes: 143
I'd add a helper function for this, that you could also use for the HGraphChecker. Something like GetPhiEquivalentOfType(Primitive::Type type).

File: runtime/primitive.h

60:0-60:25
Fri Apr 10 08:53:10 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e3617abc_7738909d
Bytes: 111
As we saw, makes a new case to handle in a switch :-) You actually don't need this if you get rid of the cache.

