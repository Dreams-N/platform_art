Revision: 141778a76d73b93299cbae3f8848f07dd91b481c
Patch-set: 4
File: runtime/gc/allocator/rosalloc.cc

36:22-36:44
Fri Apr 25 04:45:23 2014 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a593eb68_2b2ab99e
Bytes: 107
Comment on what this is? Or name it a bit more specifically (eg kPrefetchNewRunDataByZeroing or something)?

36
Fri Apr 25 19:13:41 2014 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a593eb68_2b2ab99e
UUID: a593eb68_80cd4442
Bytes: 4
Done

47:64-47:67
Fri Apr 25 04:45:23 2014 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 85b427df_21072da5
Bytes: 87
Likely redundant, but fully spell out RosAlloc::Run* to match the type of the variable?

47
Fri Apr 25 19:13:41 2014 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 85b427df_21072da5
UUID: 2581bb17_9c9e91dc
Bytes: 4
Done

552:10-552:32
Fri Apr 25 04:45:23 2014 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6587332a_89181992
Bytes: 149
The data part of the run should already be zero at this point. Is this just to zero it as an alternative way of prefetching it? Comment this briefly?

552
Fri Apr 25 19:13:41 2014 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 6587332a_89181992
UUID: 6587332a_c353ca99
Bytes: 108
It sometimes is faster than prefetching but introduces a measurable increase in memory usage. Comment added.

626:10-626:45
Fri Apr 25 04:45:23 2014 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2581bb17_2ac63f7e
Bytes: 289
This DCHECK should be outside/above the if statement as this is the sanity check on the result of MergeThreadLocalFreeBitMapToAllocBitMap() returning false. As we pass in the dedicated full run through MergeThreadLocalFreeBitMapToAllocBitMap(), and it is IsFull(), it fits nicely that way.

626
Fri Apr 25 19:13:41 2014 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2581bb17_2ac63f7e
UUID: a593eb68_e0f28879
Bytes: 4
Done

825:14-825:30
Fri Apr 25 04:45:23 2014 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a593eb68_aeb237e9
Bytes: 60
This should be first_search_vec_idx to match the field name.

825
Fri Apr 25 19:13:41 2014 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a593eb68_aeb237e9
UUID: 6587332a_0307a2a4
Bytes: 4
Done

927:8-927:25
Fri Apr 25 04:45:23 2014 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: a593eb68_319068ca
Bytes: 52
I see this logic is needed for the last vector mask.

927
Fri Apr 25 19:13:41 2014 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a593eb68_319068ca
UUID: 6587332a_2343c6cf
Bytes: 47
It was causing a DCHECK to fail but was benign.

1631:6-1631:12
Fri Apr 25 04:45:23 2014 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6587332a_8fb579d6
Bytes: 147
Once more, can this DCHECK moved outside/above the if statement since it'd check that the dedicated full run is a thread-local run as it should be.

1631
Fri Apr 25 19:13:41 2014 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 6587332a_8fb579d6
UUID: a593eb68_a00fa0be
Bytes: 4
Done

