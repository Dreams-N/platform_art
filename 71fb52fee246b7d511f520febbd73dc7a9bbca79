Revision: 71fb52fee246b7d511f520febbd73dc7a9bbca79
Patch-set: 27
File: compiler/optimizing/intrinsics_list.h

84:26-84:34
Wed Jan 21 14:10:58 2015 +0000
Author: Calin Juravle <1022077@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8b0c4779_32be8ed7
Bytes: 406
why is this kVirtual? it's a private method and should be kDirect.

I also double check what code gets generated when invoked and it's a direct call:

: java.lang.Object java.lang.ref.Reference.get() (dex_method_idx=3754)
    DEX CODE:
      0x0000: invoke-direct {v1}, java.lang.Object java.lang.ref.Reference.getReferent() // method@3755
      0x0003: move-result-object v0
      0x0004: return-object v0

84:26-84:34
Wed Jan 21 16:13:45 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8b0c4779_32be8ed7
UUID: 6bc8f375_f61a605e
Bytes: 13
You're right.

87:0-87:80
Thu Jan 15 22:32:28 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: cb3abfc4_34dc7e27
Bytes: 40
Uh, just found this... What is this for?

87:0-87:80
Thu Jan 15 22:41:44 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: cb3abfc4_34dc7e27
UUID: 0b7777c2_d67f6295
Bytes: 243
This is the standard for lists. The linter will complain if you don't put the #ifndef #define part at the top. But if you want to include the file multiple times, this is how we do it in our codebase. Compare for dex instructions, for example.

87:0-87:80
Fri Jan 16 08:44:37 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0b7777c2_d67f6295
UUID: 4bc24f1f_0d3dd1df
Bytes: 119
Why would you want to include it multiple times? It's just a macro.

Where is it stated that it's a standard for lists?

87:0-87:80
Fri Jan 16 17:46:06 2015 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4bc24f1f_0d3dd1df
UUID: abdbcb04_6af1dbf5
Bytes: 113
Can't I use INTRINSICS_LIST(foo) and then later INTRINSICS_LIST(bar) without including the header multiple times?

87:0-87:80
Fri Jan 16 17:50:58 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: abdbcb04_6af1dbf5
UUID: 2bcfdb48_db59bf86
Bytes: 358
I don't think that's true - I mean it's a general define. My guess is it was made for locality - whenever you have a list you keep this local and undefine right after use.

Anyways, I copied that from dex_instruction.h (and now the Quick entrypoints are written in the same way). If you prefer to do it differently in the optimizing compiler I can do that...

87:0-87:80
Wed Jan 21 11:11:19 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2bcfdb48_db59bf86
UUID: 4bc24f1f_a1b12652
Bytes: 58
So it's only to protect against a macro name clash, right?

87:0-87:80
Wed Jan 21 16:13:45 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4bc24f1f_a1b12652
UUID: 4bc5ef5b_f51a585e
Bytes: 11
I think so.

