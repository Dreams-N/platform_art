Revision: fdaa38990feaf1608c7a5ad97fab7c004f82a557
Patch-set: 2
File: compiler/elf_writer_debug.cc

420:9-420:13
Thu Dec 10 11:27:07 2015 +0000
Author: Tamas Berghammer <1059813@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 65fcce2b_fe3141c7
Bytes: 4
typo

954:18-954:28
Thu Dec 10 15:14:11 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c5701ac6_b963bfed
Bytes: 88
Such a map is already being created in the compiler, why do you need to create it again?

954:18-954:28
Thu Dec 10 15:40:30 2015 +0000
Author: David Srbecky <1065473@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c5701ac6_b963bfed
UUID: 8030d0ce_07601683
Bytes: 296
This CL removes it from the compiler, and delays its creation until this point, removing the need to keep it in memory in the meantime.

If the quick compiler gets killed or if we do not need to support native debugging there, I can remove the need to materialize the vector in memory altogether.

954:18-954:28
Thu Dec 10 15:42:36 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8030d0ce_07601683
UUID: 0576b2c5_f307105f
Bytes: 201
Oh yeah, i've done a half way review. Cool :-) Still, it looks like the code in the compiler was doing it for each instruction, whereas now you're only doing it for stack map entries. Is that intended?

954:18-954:28
Thu Dec 10 15:50:52 2015 +0000
Author: David Srbecky <1065473@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0576b2c5_f307105f
UUID: 0576b2c5_b301984b
Bytes: 344
Correct.  The next step is to ensure that I have more stack map entries when doing native debugging.  I need native_pc to dex_pc mapping, and location (stack or machine register) of dex registers.  In other words, precisely the content of stackmaps.  So it makes sense to get the data from there rather than adding more debugging side-channels.

