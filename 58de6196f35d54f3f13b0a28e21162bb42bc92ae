Revision: 58de6196f35d54f3f13b0a28e21162bb42bc92ae
Patch-set: 1
File: /COMMIT_MSG

9
Wed Aug 17 16:47:07 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_520fa235
Bytes: 88
I would add a README.md in this directory with all this information in a formatted style

9
Wed Aug 17 16:55:35 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: dbdd7f2d_520fa235
UUID: dbdd7f2d_12da7a41
Bytes: 106
oh, and move it into its own directory (not the top level tools), not put a README at this level of course

File: tools/bisection-search.py

1
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_3df66f91
Bytes: 30
needs the version 2.7, 2.8 etc

23
Wed Aug 17 16:47:07 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_d214925a
Bytes: 87
perhaps add a usage line here (with all optional comments listed, as done in Linux man)

25
Wed Aug 17 16:47:07 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_d299f217
Bytes: 75
maybe strip the test_float part and the 19742 to get a more concise example

41
Wed Aug 17 16:47:07 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_f2218eb1
Bytes: 28
these globals need a comment

52
Wed Aug 17 16:47:07 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_3256963e
Bytes: 96
as a general rule, give each class its own header comment, including such exception placeholders

62
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_ddde6b06
Bytes: 39
nit: String doc for public constructors

131
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_3d5bcf64
Bytes: 74
Leaving here in a comment what this loop is trying to parse would be good.

140
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_bd999f18
Bytes: 195
use () instead of [] if you're just going to immediately iterate over again so that it's lazy.

There's no need to eagerly make an array and then immediately visit it again to make another array.

146
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_dd73cbe1
Bytes: 93
Why -j1? Slowing things down unnecessarily.

Are lines being mixed in if it's -jMoreThanOne ?

147
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_3d44af79
Bytes: 67
nit: "if compiled_methods" ? Do you want to disambiguate vs [] etc?

163
Wed Aug 17 16:47:07 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_12a27aec
Bytes: 462
I like this abstraction for the host/target. A very clean way. However, I would add much more documentation to this class (first why it is there, and how it is used by a driver in a way that is no longer aware of host/target)

Also, this ABS and its subclasses are useful utilities that we could share between all upcoming scripts that need to set up host and target. How about making this their own module now already, so we can start importing these in others?

187
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_dd210bb2
Bytes: 16
nit: missing doc

191
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_fd1ec774
Bytes: 16
nit: missing doc

201
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_1d81b362
Bytes: 23
nit: missing doc string

205
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_1d0d3346
Bytes: 16
nit: missing doc

207:22-207:55
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_3d12ef68
Bytes: 40
nit: should be constant near top of file

210
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_7d0c7747
Bytes: 16
nit: missing doc

212
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_5dd5fbb5
Bytes: 346
I'm not a big fan of this. It has to wait until process fully finishes (sends EOF).

It would be a superior design if it read the output as it streamed in, perhaps this can return an iterator to every line in the output instead (the exact mechanism doesn't matter so long as it doesn't need to block).

(and of course it would execute faster too)

223
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_bd435f4d
Bytes: 23
nit: missing doc string

233
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_9d1dc36e
Bytes: 127
This doesn't seem right, should be able to use one of the existing android environment variables to get it (see the art script)

236:36-236:54
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_dd274bb4
Bytes: 101
hardcoding this string is not future proof because at some point we will have 64-bit only host builds

238
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_bd1a7f71
Bytes: 63
A comment leaving why this load bias is necessary would be good

240
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_1d58d336
Bytes: 23
nit: missing doc string

245
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_3d382fd2
Bytes: 25
with open(..) as f:
  ...

248
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_5d625be2
Bytes: 23
nit: missing doc string

252
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_7d6717f1
Bytes: 23
nit: missing doc string

257
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_1d97f39a
Bytes: 58
one-liner:

classpath = property(attrgetter("_classpath"))

271
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_9d74e396
Bytes: 9
Comments?

279
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_5d917ba1
Bytes: 10
Docstring?

289
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_dd5f4be9
Bytes: 34
Is it doing a root anywhere first?

299
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_5d06dbf2
Bytes: 50
? It should probably be making a file in /data/tmp

308:28-308:31
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_9d55c3cf
Bytes: 144
interface nit: it should probably look more like an argv instead of a string, that way you can wrap every argument with "" to make it space-safe

337
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_dd0d8be9
Bytes: 35
wrap args with "" 

"{0}" "{1}" etc

346
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_dd266b61
Bytes: 182
very dangerous if {0} is ever blank

   'adb shell [ -d {0} ] && rm {0}/* ' instead

also this will fail if you have files inside subdirectories, so you probably wanted rm -r instead

362
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_9df943b6
Bytes: 43
any reason to return [] instead of () here?

410:25-410:39
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_fd87a70e
Bytes: 16
--correct-output

419
Wed Aug 17 16:47:07 2016 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_d2481263
Bytes: 109
Use comments to break the various stages in this main (getting arguments), setting up env, running, reporting

430
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_dddcab40
Bytes: 84
too hardcoded

also there should be an option to use libartd.so instead of libart.so

435
Tue Aug 16 22:30:04 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dbdd7f2d_7dc39758
Bytes: 45
should be able to run dalvikvm{32,64} as well

