Revision: 422fc8e4fd6b01972691030c7304093b246d128e
Patch-set: 1
File: build/Android.common.mk

170:0-170:30
Wed Mar 05 16:54:00 2014 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dc76f9c4_4602b767
Bytes: 547
first, this seems to be a no-op because its commented out. This is make not cpp.

second, this doesn't seem to be the right thing because if you are building this project, I believe it really is required.

If you are building using only embedded, perhaps this project should be removed from the manifest?

I defer to Ying on the best way to deal with embedded, perhaps we need to change things to tolerate an empty value, but the concern here is that people forget to set it correctly for their processor which we had seen with Dalvik in the past.

170
Wed Mar 05 21:48:16 2014 +0000
Author: Ying Wang <1003981@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: dc76f9c4_4602b767
UUID: 9cd641da_579fe407
Bytes: 140
Maybe we should make the DALVIK_VM_LIB check in build/core/dex_preopt.mk nonfatal. So embedded build gets a warning but can still proceeded.

170
Thu Mar 06 01:19:23 2014 +0000
Author: Amit Pundir <1031448@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 9cd641da_579fe407
UUID: dca43989_638a629a
Bytes: 397
That'll do but in that case embedded builds will still be vulnerable to build/core/dex_preopt* changes. I still prefer including build/core/dex_preopt.mk conditionally.

I'm sorry if my question doesn't make sense due to my lack of ART know-how but is it sensible to make DEX2OAT_TARGET_INSTRUCTION_SET_FEATURES check non-fatal instead or set it to default in case we do not include dex_preopt.mk?

170:0-170:30
Thu Mar 06 01:19:23 2014 +0000
Author: Amit Pundir <1031448@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: dc76f9c4_4602b767
UUID: fca73d88_87d2080f
Bytes: 47
My bad. I didn't upload the correct patch here.

