Revision: eb557293d7483268514af38af4117d05300c1606
Patch-set: 11
File: compiler/optimizing/graph_checker.cc

142:50-142:61
Wed Jul 15 10:14:13 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 18f0c2db_f0fb2089
Bytes: 28
normal-flow -> a normal-flow

143:23-143:72
Wed Jul 15 10:14:13 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d8470aeb_9e841d18
Bytes: 64
->, therefore we only test normal flow successors in SsaChecker.

File: compiler/optimizing/nodes.cc

1168:0-1168:56
Tue Jul 14 15:38:23 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 18a282bf_63619c07
Bytes: 176
Could you also do:

if (graph_->InSsaForm()) {
  DCHECK(predecessor is not in the exceptions successors);
  return false;
}
return !IsFirstIndexOfPredecessor(predecessor, idx);

1168:0-1168:56
Wed Jul 15 04:29:20 2015 +0000
Author: David Brazdil <1059815@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 18a282bf_63619c07
UUID: 38e906fb_f1b3283a
Bytes: 395
I'm not so sure that's worthwhile because (a) this function is used only by the catch block simplification pass (so not InSsaForm), and (b) if I start differentiating between non-SSA/SSA then I might as well start the function with:

  if (graph_->InSsaForm()) {
    DCHECK(everything)
    return IsCatchBlock();
  }

because only catch blocks have exceptional predecessors after simplification.

1168:0-1168:56
Wed Jul 15 10:14:13 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 38e906fb_f1b3283a
UUID: 18f0c2db_1076a4b4
Bytes: 124
I see. Maybe it will be clearer if it wasn't a method on HBasicBlock then, but just a static helper for SimplifyCatchBlocks?

File: compiler/optimizing/nodes.h

186:0-186:33
Wed Jul 15 10:14:13 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 985112ab_3c17114e
Bytes: 64
Add comments here why you need to do this before TransformToSSA.

740:7-740:31
Wed Jul 15 10:14:13 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 985112ab_9c1e6563
Bytes: 158
Starting the method with "Is" is a bit odd, as you're not asking whether "this" block is an exceptional predecessor. Maybe CheckIfPredecessorAtIsExceptional ?

743:7-743:29
Wed Jul 15 10:14:13 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 18f0c2db_500d4c3d
Bytes: 6
ditto?

745:36-745:46
Wed Jul 15 10:14:13 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 38e906fb_713978dd
Bytes: 77
This needs comments. Should you DCHECK that idx 0 is a normal flow successor?

