Revision: 3efca20313729903339819432d022f6aba3aa4b7
Patch-set: 1
File: Android.mk

404:56-404:79
Thu Jan 07 08:41:16 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8a68ef71_8a1feb9e
Bytes: 66
Why is the PWD relevant? Shouldn't you mention mmm or mma instead?

404:56-404:79
Fri Jan 08 00:17:29 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8a68ef71_8a1feb9e
UUID: aa3e9347_eac6b81e
Bytes: 4
Done

404:0-406:19
Thu Jan 07 06:26:17 2016 +0000
Author: Brian Carlstrom <1003723@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6a481bfe_785e01cb
Bytes: 64
isn't this what LOCAL_REQUIRED_DEPENDENCIES is for or something?

404:0-406:19
Thu Jan 07 06:31:00 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 6a481bfe_785e01cb
UUID: 8a41cfd9_34e5e623
Bytes: 131
LOCAL_REQUIRED_MODULES still make ninja complain if they form a cycle (libart -> libopenjdk -> libopenjdkjvm -> libart). I tried...

404:0-406:19
Thu Jan 07 19:31:15 2016 +0000
Author: Ying Wang <1003981@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8a41cfd9_34e5e623
UUID: aa3e9347_95362eda
Bytes: 95
This setup looks awkward to me. I'd suggest you run "mmma libcore art" to get all things built.

404:0-406:19
Thu Jan 07 19:36:50 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: aa3e9347_95362eda
UUID: 4a4357e2_89e5bc37
Bytes: 49
But that's not the traditional thing to do... :-)

409:0-409:50
Thu Jan 07 08:41:16 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4a2c372e_d87631b8
Bytes: 85
Comment that the name has no signification here.

Any other way to make this cleaner?

409:0-409:50
Fri Jan 08 00:17:29 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4a2c372e_d87631b8
UUID: ea1debf7_cbdc0a0d
Bytes: 4
Done

412:0-426:5
Thu Jan 07 19:31:15 2016 +0000
Author: Ying Wang <1003981@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4a4357e2_09f1acff
Bytes: 549
If you define two phony packages, one for host and one for target, you can use LOCAL_REQUIRED_MODULES without the direct dependencies. Something like:

include $(CLEAR_VARS)
LOCAL_MODULE := art-libartd-libopenjdkd-dependency
ifeq ($(ART_BUILD_TARGET_DEBUG),true)
LOCAL_REQUIRED_MODULES:= libopenjdkd
endif
include $(BUILD_PHONY_PACKAGE)

include $(CLEAR_VARS)
LOCAL_MODULE := art-libartd-libopenjdkd-dependency
ifeq ($(ART_BUILD_HOST_DEBUG),true)
LOCAL_REQUIRED_MODULES:= libopenjdkd
endif
LOCAL_IS_HOST_MODULE := true
include $(BUILD_PHONY_PACKAGE)

412:0-426:5
Fri Jan 08 00:17:29 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4a4357e2_09f1acff
UUID: ea1debf7_2bd82617
Bytes: 4
Done

File: runtime/common_runtime_test.cc

432:0-432:57
Thu Jan 07 08:41:16 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4a2c372e_f87bed9e
Bytes: 179
This seems arbitrary how about:
static constexprt char* kLibOpenJdk = kIsDebugBuild ? "...d" : "...";

(Just realized you're doing that in the next file, so how about sharing it?)

432:0-432:57
Fri Jan 08 10:34:51 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4a2c372e_f87bed9e
UUID: 4a2c372e_9bbbd3df
Bytes: 23
How about this comment?

432:0-432:57
Fri Jan 08 16:41:02 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4a2c372e_9bbbd3df
UUID: 4a74377b_75fb2893
Bytes: 228
Sorry, forgot to reply:

gtests are *only* built in debug mode, and that's why things are (and were) explicit here.

If you feel that the refactor adds actually value I'll do it. The intention was to have the minimal change. :-)

