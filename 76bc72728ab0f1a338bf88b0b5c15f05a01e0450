Revision: 76bc72728ab0f1a338bf88b0b5c15f05a01e0450
Patch-set: 5
File: runtime/arch/x86/fault_handler_x86.cc

30
Thu Jul 24 01:22:27 2014 +0000
Author: Mark P Mendell <1036869@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 193d089f_c3c35440
Bytes: 26
What about Apple & 64 bit?

30
Thu Jul 24 02:31:06 2014 +0000
Author: Dave Allison <1036486@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 193d089f_c3c35440
UUID: 193d089f_d525cbc9
Bytes: 164
Don't know.  The apple changes worked on my laptop.  Don't know why it's not x86_64 though.  Maybe I need an environment variable or something.  Ian?  Any insights?

30
Thu Jul 24 17:30:20 2014 +0000
Author: Chao-ying Fu <1010712@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 193d089f_d525cbc9
UUID: d9461042_47a04dbe
Bytes: 471
Maybe you need manually edit this file to enable the 64-bit host build.
Ex:
fu@fu-ubuntu:/disk/dev/aosp/build$ git diff
diff --git a/core/envsetup.mk b/core/envsetup.mk
index d0b5846..f48cc25 100644
--- a/core/envsetup.mk
+++ b/core/envsetup.mk
@@ -71,7 +71,7 @@ endif
 # after we default to 64-bit host build.
 ifeq (,$(BUILD_HOST_64bit))
 # Default to 32-bit-by-default multilib host build.
-HOST_PREFER_32_BIT := true
+HOST_PREFER_32_BIT := false
 endif
 
 # HOST_ARCH

30
Thu Jul 24 17:43:58 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d9461042_47a04dbe
UUID: f93914b5_afe8e8cb
Bytes: 253
You need to set BUILD_HOST_64bit=1, however, the x86-64 assembly code won't run on a Mac for the usual Mac screwed up their assembler reasons. My work around was to fill the x86-64 assembly code on the Mac with breakpoint instructions. Fixes welcome :-)

File: runtime/arch/x86/x86_inst_len.h

34:0-89:3
Mon Jul 28 20:52:44 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d91ff043_85622e8b
Bytes: 35
any reason to keep these in the .h?

91:2-91:6
Mon Jul 28 20:52:44 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d91ff043_a5880a11
Bytes: 5
const

92:0-97:15
Mon Jul 28 20:52:44 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7615332e_9f60fb5c
Bytes: 18
why all the state?

File: runtime/arch/x86/x86_opcodes.h

26:0-26:5
Mon Jul 28 20:52:44 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 36f65b4a_3c57a8e7
Bytes: 6
struct

32:0-32:5
Mon Jul 28 20:52:44 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d91ff043_c5a26682
Bytes: 6
struct

