Revision: 2761dcc67d8d14112f417077b79eb4956ee5fd14
Patch-set: 2
File: /COMMIT_MSG

10:6-10:56
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_6f733117
Bytes: 70
Could write this succinctly as test-art-target-gtest-dex_file_test :-)

10:6-10:56
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_6f733117
UUID: 45052e49_108704c2
Bytes: 16
Thanks, done :-)

File: runtime/dex_file.h

435:2-438:69
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_4fe74d3e
Bytes: 125
Is there a reason for the seeming duplication with OpenMemory? Especially since the implementation is a direct forward, only.

435:2-438:69
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_4fe74d3e
UUID: 45052e49_d0361c48
Bytes: 111
Only that this is WIP and there's a TODO in the implementation to resolve regarding what this should look like.

File: runtime/dex_file_test.cc

170:2-170:30
Thu Aug 25 14:45:35 2016 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 658a32dd_a125beb0
Bytes: 76
I'd replace this with:

  CHECK_NE(dex_bytes.size(), 0);

here and in below.

170:2-170:30
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 658a32dd_a125beb0
UUID: e550e21d_053a7277
Bytes: 4
Done

175:24-175:37
Thu Aug 25 14:45:35 2016 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0554160d_46599267
Bytes: 43
Nit:

  dex_bytes.data()

(here and below).

175:24-175:37
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0554160d_46599267
UUID: 45560e16_285e6b51
Bytes: 4
Done

209:40-210:68
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_4f12ed10
Bytes: 144
Single line for each arg, spaces around |

Also, recently we add /* */ with names for literals to make clear what a "false", for example, means.

209:40-210:68
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_4f12ed10
UUID: 45052e49_b018b8d2
Bytes: 4
Done

212:56-213:70
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_af735977
Bytes: 25
Single line for each arg.

212:56-213:70
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_af735977
UUID: 45052e49_9015b49c
Bytes: 4
Done

251:0-251:113
Thu Aug 25 14:45:35 2016 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 45560e16_68b0e3a2
Bytes: 70
Nit: long line (the Android coding style permits 100-character lines).

251:0-251:113
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 45560e16_68b0e3a2
UUID: a59b4a32_7bb19f44
Bytes: 4
Done

252:17-252:23
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_af0cb9ed
Bytes: 14
Not necessary.

252:17-252:23
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_af0cb9ed
UUID: 45052e49_f01240b0
Bytes: 4
Done

File: runtime/native/dalvik_system_DexImageClassLoader_Image.cc

47:15-47:16
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_4fcd0d8f
Bytes: 10
Uppercase.

47:7-47:14
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_cff7bdbe
Bytes: 96
unique_ptr

It's important, you're actually leaking the MemMap below in at least one error case.

47:15-47:16
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_4fcd0d8f
UUID: 45052e49_100a647f
Bytes: 4
Done

47:7-47:14
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_cff7bdbe
UUID: 45052e49_5004ec71
Bytes: 93
Unequivocally good practice.

Paths are subtle here (bad), could not see the leak referenced?

48:2-49:34
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_0fc70571
Bytes: 47
That's not the right comment for this function.

48:2-49:34
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_0fc70571
UUID: 45052e49_f039a038
Bytes: 4
Done

82:0-86:33
Thu Aug 25 16:52:21 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 25de7af7_8fda153f
Bytes: 77
In most cases we prefer StringPrintf, as that's Google style guide compliant.

82:0-86:33
Fri Aug 26 11:01:48 2016 +0000
Author: Orion Hodson <1071150@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 25de7af7_8fda153f
UUID: 45052e49_b02f18f0
Bytes: 5
Done.

