Revision: 07aee1ff820f8d70b1b99b5d3fbc14a17dcb75e1
Patch-set: 1
File: compiler/dex/quick/mips/utility_mips.cc

46:0-51:64
Tue Feb 24 16:02:58 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 65574942_f7a1a082
Bytes: 142
JNI entrypoints are *not* used by Quick. Remove them. It is also wrong to do this "direct trampoline" with them, as they may throw exceptions.

46:0-51:64
Wed Feb 25 16:59:25 2015 +0000
Author: Nikola Veljkovic <1040193@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 65574942_f7a1a082
UUID: c57b955e_c5ec4c1a
Bytes: 4
Done

31:4-55:37
Tue Feb 24 16:02:58 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 653e69ec_429ed47c
Bytes: 36
Please make this a switch statement.

31:4-55:37
Wed Feb 25 16:59:25 2015 +0000
Author: Nikola Veljkovic <1040193@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 653e69ec_429ed47c
UUID: c57b955e_e5e1501f
Bytes: 4
Done

741:2-747:3
Tue Feb 24 16:02:58 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 653e69ec_a28ec046
Bytes: 308
There needs to be a big comment here and at the definition. Something along the line that this would in general not be safe to do at all, as it violates the frame size of the Quick method. You can only do this as you're going directly to some native implementation that does *not* do anything in the runtime.

741:2-747:3
Tue Feb 24 21:58:36 2015 +0000
Author: Nikola Veljkovic <1062659@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 653e69ec_a28ec046
UUID: a5c5c17a_f939d7ff
Bytes: 246
I am open for ideas on a better solution. One that would respect both the Quick method frame format, and the MIPS ABI.
Adding asm trampoline for each of these methods seems expensive.
In the meantime, we can use this workaround to resolve errors.

741:2-747:3
Tue Feb 24 23:15:59 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: a5c5c17a_f939d7ff
UUID: 4547a5ec_5e50d599
Bytes: 533
I understand that there isn't any "great" way to do this. In general you can't make MIPS and Quick format agree, as Quick isn't structured that way and we won't change runtime expectations for just one architecture.

That's why for me it would be OK to put two big warning signs (here and above) as mentioned. It might also be prudent to make this a "decision" that is more central, e.g., somewhere in the runtime, so that it's harder to have mismatches between initializing the entrypoints structure and the corresponding code here.

741:2-747:3
Wed Feb 25 16:59:25 2015 +0000
Author: Nikola Veljkovic <1040193@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4547a5ec_5e50d599
UUID: 05720d91_d4fb1c7c
Bytes: 4
Done

