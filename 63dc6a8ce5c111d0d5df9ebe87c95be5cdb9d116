Revision: 63dc6a8ce5c111d0d5df9ebe87c95be5cdb9d116
Patch-set: 2
File: runtime/monitor_pool.cc

53:2-53:19
Wed Jul 09 17:30:13 2014 +0000
Author: Hans Boehm <1042828@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d9045004_ff0dbb5b
Bytes: 514
It seems much better to start scanning where we left off the last time, or even at a pseudo-random place, and wrap around at the end of the last allocated chunk.  The current approach is likely to spend a lot of time scanning the beginning of the bit vector if we ever end up with a significant number of inflated monitors.

This probably rarely happens, so the risk here is a nasty performance anomaly rather than bad behavior on typical benchmarks.

Rule of thumb:  Never use any variant of first-fit allocation.

53:2-53:19
Thu Jul 10 06:56:52 2014 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d9045004_ff0dbb5b
UUID: d9045004_86ee6bd5
Bytes: 38
Changed to a free-list implementation.

95:0-95:22
Wed Apr 30 22:34:27 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0afbe434_a7b60875
Bytes: 49
evidence we should be overloading new and delete?

File: runtime/monitor_pool.h

159:40-159:41
Wed Apr 30 22:34:27 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: eaf77045_a3071ea4
Bytes: 33
GUARDED_BY(allocated_ids_lock_) ?

159:40-159:41
Thu Jul 10 06:56:52 2014 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: eaf77045_a3071ea4
UUID: d9045004_b102c295
Bytes: 62
No, as the translation from id to ptr needs this.touches this.

165:0-165:35
Wed Apr 30 22:34:27 2014 +0000
Author: Ian Rogers <1010118@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: ca046c04_c50b5087
Bytes: 7
similar

165:0-165:35
Thu Jul 10 06:58:08 2014 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ca046c04_c50b5087
UUID: f9f75445_ff9ff2da
Bytes: 49
Now free-list implementation with the GUARDED_BY.

