Revision: 6cfc2c086c47342fd8f5cb09f565979333066473
Patch-set: 2
File: runtime/class_linker.cc

1028:2-1028:28
Mon Oct 12 23:21:35 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: bf3c0ef3_85dd86d1
Bytes: 70
Is the cache now even useful, at all? Where are the benchmark numbers?

1028:2-1028:28
Mon Oct 12 23:24:50 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: bf3c0ef3_85dd86d1
UUID: 9fae6a64_8cb30b3a
Bytes: 112
GC is not that frequent, I'd assume the cache is unaffected or in the noise. What benchmark would you recommend?

1028:2-1028:28
Mon Oct 12 23:26:22 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 9fae6a64_8cb30b3a
UUID: 5fa8725b_ea11431f
Bytes: 108
Any GC and array-heavy benchmark, obviously. :-)

What did you use to justify the introduction of the cache?

1028:2-1028:28
Mon Oct 12 23:34:31 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 5fa8725b_ea11431f
UUID: 1f30ba11_2b20c937
Bytes: 24
Its Ian's cache I think.

1028:2-1028:25
Mon Oct 12 23:39:41 2015 +0000
Author: Hiroshi Yamauchi <1022530@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: bf3c0ef3_8558e6e7
Bytes: 134
This is visited concurrently. Does this need a store fence here after clearing? What if some thread sees a stale from-space ref in it?

1028:2-1028:25
Mon Oct 12 23:44:01 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: bf3c0ef3_8558e6e7
UUID: 1f30ba11_8b0ab5a3
Bytes: 147
Then that would trigger the read barrier and get handled correctly wouldn't it? Otherwise we would need a fence everywhere we assigned to a GCRoot.

File: runtime/native/java_lang_Class.cc

525:4-528:5
Mon Oct 12 23:21:35 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: bfb7aeb4_f0cff6b0
Bytes: 44
What does this have to do with the CL topic?

525:4-528:5
Mon Oct 12 23:24:50 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: bfb7aeb4_f0cff6b0
UUID: ff32061b_aa2213b3
Bytes: 90
Test fails if I didn't add it since it calls FindClass is called with a pending exception.

