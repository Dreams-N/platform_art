Revision: b5433736f8a0c074fa2f75525353eb527c763dc1
Patch-set: 1
File: compiler/optimizing/induction_var_analysis.cc

28:57-28:81
Wed Oct 28 14:44:38 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 16826951_92787cb1
Bytes: 22
was that a bug before?

28:57-28:81
Wed Oct 28 17:42:49 2015 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 16826951_92787cb1
UUID: d6d0d18a_88fd1723
Bytes: 380
Good question. No bug, but the old code was too conservative. I found a few test cases where a definition went from one loop to another, but neither loop was nested in the other. The new implementation detects that too.

I even have a unit test for that, but without the BCE part that is a bit harder to test exactly. So if you are okay, I will add that unit test to the other CL.

28:57-28:81
Wed Oct 28 19:19:18 2015 +0000
Author: Mingyao Yang <1043514@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d6d0d18a_88fd1723
UUID: 76c565cc_85922295
Bytes: 142
Can you add a DCHECK when this function returns true, instruction dominates loop's header to make sure instruction is really relevant to loop?

28:57-28:81
Wed Oct 28 19:45:27 2015 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 76c565cc_85922295
UUID: d6d0d18a_eb0acd35
Bytes: 4
Done

600
Wed Oct 28 19:19:18 2015 +0000
Author: Mingyao Yang <1043514@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: b6d35d95_c7753ef9
Bytes: 12
when U < 12?

600
Wed Oct 28 19:45:27 2015 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b6d35d95_c7753ef9
UUID: 56ab01f0_8fe7d9c3
Bytes: 112
Hmm. Weird. I have the strange feeling I corrected this earlier (or was it somewhere else)?

Done now, for sure.

File: compiler/optimizing/induction_var_range.cc

155:59-155:63
Wed Oct 28 14:44:38 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 16826951_b27d80a0
Bytes: 16
why this change?

155:59-155:63
Wed Oct 28 17:42:49 2015 +0000
Author: Aart Bik <1074526@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 16826951_b27d80a0
UUID: 7621e584_45068a38
Bytes: 182
See the other file. When we just had the TC expression, it made sense to just use b (just like neg). Now that we have top test and TC, I thought the a/b order was a bit more logical.

