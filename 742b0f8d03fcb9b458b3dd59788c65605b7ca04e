Revision: 742b0f8d03fcb9b458b3dd59788c65605b7ca04e
Patch-set: 9
File: compiler/utils/mips/assembler_mips.cc

795:48-795:67
Tue Sep 15 10:07:52 2015 +0000
Author: Alexey Frunze <1056098@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 648afea0_491854b1
Bytes: 225
So, now you're using offset + kMipsWordSizeOffset here but in pretty much the same situation at the end of the function you're using offset + kMipsWordSize. This is odd. Couldn't the same named constant be used in such cases?

795:48-795:67
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 648afea0_491854b1
UUID: 2900dfee_3e09e533
Bytes: 41
Agreed, we could just have kMipsWordSize.

795:48-795:67
Wed Sep 16 10:49:10 2015 +0000
Author: Alexey Frunze <1056098@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 2900dfee_3e09e533
UUID: 8478d270_67f0cd5b
Bytes: 617
There's a little problem here, though. kMipsWordSize is of type size_t. Adding it to offset, which is int32_t, makes the sum size_t as well and affects the result of IsInt<16>(). The original constant 4 in place of kMipsWordSizeOffset did not have this problem because it was of type signed int. There are several workarounds possible:
1. revert kMipsWordSizeOffset back to 4
2. keep this ugly kMipsWordSizeOffset
3. cast kMipsWordSize or, better yet, offset + kMipsWordSize to int32_t
4. introduce int32_t offset_hi = offset + kMipsWordSize; and use it here
5. is anything nicer possible at all?
What's your opinion?

795:48-795:67
Wed Sep 16 11:03:09 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8478d270_67f0cd5b
UUID: 2900dfee_decd6146
Bytes: 79
I'd go for solution #3 + a small comment about this to explain the static_cast.

1443:19-1443:30
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 490513fd_7fae4bbc
Bytes: 12
instructions

1443:40-1443:47
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 691f3755_78d77d2e
Bytes: 35
Push(IncreaseFrameSize(ADDIU) + SW)

1645:29-1645:43
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 09e87b64_025daa87
Bytes: 66
Replace with

  !IsAligned<kMipsDoublewordSize>

(here and below).

1917:0-1917:107
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2900dfee_fe225db2
Bytes: 43
Nit: long line (put one argument per line).

1945:0-1945:101
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2900dfee_de1fa166
Bytes: 6
Ditto.

File: compiler/utils/mips/assembler_mips.h

20:0-21:17
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: c93f43b4_d317860f
Bytes: 42
Please sort these #includes by file names.

23:0-29:20
Wed Sep 16 10:30:39 2015 +0000
Author: Roland Levillain <1052644@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 89fb8b33_c112248f
Bytes: 9
Likewise.

