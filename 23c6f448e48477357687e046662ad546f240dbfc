Revision: 23c6f448e48477357687e046662ad546f240dbfc
Patch-set: 2
File: compiler/dex/quick/arm/int_arm.cc

1019:0-1024:36
Thu Aug 07 09:32:21 2014 +0000
Author: Zheng Xu <1042649@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 962f07b5_8c448881
Bytes: 106
Though there are 2 branches in the loop, it is faster than :

b.cond return
loop:
...
b.cond loop
b return

1019:0-1024:36
Thu Aug 07 10:29:42 2014 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 962f07b5_8c448881
UUID: b6f7ab98_eb36d1fa
Bytes: 166
I see, you're saying that the branch predictor can't learn that a conditional back-branch is likely to be _taken_, or that it takes a few _slow_ iterations to learn .

1019:0-1024:36
Thu Aug 07 10:39:13 2014 +0000
Author: Zheng Xu <1042649@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: b6f7ab98_eb36d1fa
UUID: b6a40b88_fd10276d
Bytes: 232
Yes. It is a bit weird that on both a53 and a57, 2 branches in the loop is faster on 32bit mode, while 1 branch in the loop is faster on 64bit mode. Probably, 2 conditional branches are too close to each other on 32bit mode(thumb2).

