Revision: a5db1af4c874c9149f3c7313ce1ed6bf9d42ad27
Patch-set: 4
File: runtime/dex_file.h

1267
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 644d9e85_93569ef6
Bytes: 22
Ewwwww. Do we have to?

1267
Mon Sep 07 08:57:38 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 644d9e85_93569ef6
UUID: c4d56a01_202d6a5f
Bytes: 29
It's a test, I wouldn't care.

File: runtime/dex_file_verifier.cc

0
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8497f201_294978f7
Bytes: 181
I feel like this could potentially use more comments, it's pretty hard to follow along without needing to read the dex file specification side-by-side for every single line of code.

459
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 44141a88_0b26be94
Bytes: 53
nit, subexpressions should be indented extra 4 spaces

496:56-496:64
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 84529221_c07b0954
Bytes: 6
PRiu16

496:56-496:64
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 84529221_c07b0954
UUID: 44cedaa4_54152c75
Bytes: 4
Done

719
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8497f201_4952c4a9
Bytes: 53
nit, subexpressions should be indented extra 4 spaces

719
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8497f201_4952c4a9
UUID: 84d4522f_960cec44
Bytes: 36
Q: Are dereferences sub-expressions?

723
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 04cce27b_2c49dcf7
Bytes: 53
nit, subexpressions should be indented extra 4 spaces

770:75-770:76
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 84529221_00424104
Bytes: 6
PRIu32

770:75-770:76
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 84529221_00424104
UUID: 04c1426c_ba8c71fd
Bytes: 92
I believe %u is common in our code, though. And compare for the pre-existing %d above... :-(

796:74-796:75
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 644d9e85_f3139220
Bytes: 6
PRIu32

822:76-822:77
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 04cce27b_0ce33845
Bytes: 6
PRIu32

850:76-850:77
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6492fe15_2b43b87a
Bytes: 6
PRIu32

2289
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e486eed4_890c4b7d
Bytes: 38
wouldn't this be better in the header?

2289
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e486eed4_890c4b7d
UUID: 24c9e69c_531f8468
Bytes: 117
Header of what (dex_file_verifier.h, modifiers.h, ...)? I think this is an implementation detail only necessary here.

2337
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e486eed4_49f0835a
Bytes: 31
minor: document out parameters?

2337
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e486eed4_49f0835a
UUID: e4c34e74_b9bc7f13
Bytes: 4
Done

2378
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6492fe15_2b297865
Bytes: 39
Would it make more sense in the header?

2405:50-2405:56
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 644d9e85_33000a75
Bytes: 36
minor: constant variable for string?

2409:51-2409:57
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 44141a88_2bb8da1e
Bytes: 36
minor: constant variable for string?

2415:39-2415:40
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8497f201_2c3d06f2
Bytes: 6
PRIu32

2422:45-2422:47
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 644d9e85_13fd0edc
Bytes: 6
PRIu32

2429:53-2429:54
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0484e2ca_0a190d81
Bytes: 6
PRIu32

2443:40-2443:42
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 04cce27b_bf2190af
Bytes: 6
PRIu32

2453:6-2453:12
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e486eed4_e92ab740
Bytes: 49
code doesn't use "static" elsewhere, inconsistent

2453:6-2453:12
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: e486eed4_e92ab740
UUID: e4c34e74_79c7079f
Bytes: 4
Done

File: runtime/dex_file_verifier.h

126
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8497f201_69730070
Bytes: 28
nit: document out parameters

126
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8497f201_69730070
UUID: 64cf5e9f_beb8ddff
Bytes: 4
Done

129
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 44141a88_ab932a1a
Bytes: 37
What does it mean to 'check' exactly?

129
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 44141a88_ab932a1a
UUID: c4ef2afe_0680a37f
Bytes: 66
I do not really want to quote the JLS (or dex constraints) here...

134
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: e486eed4_3efd37dc
Bytes: 37
What does it mean to 'check' exactly?

File: runtime/dex_file_verifier_test.cc

106:26-106:33
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 04cce27b_ff1b1879
Bytes: 7
const ?

106:26-106:33
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 04cce27b_ff1b1879
UUID: 244c8613_5bea23e5
Bytes: 82
I'd have to const-cast it away immediately, as I want to modify a derived element.

123
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 240f267a_5d535bdd
Bytes: 166
vertical space before 123

also if you get rid of the & it should be just as good (if not better, since then the function doesn't need to decay to a function pointer)

123
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 240f267a_5d535bdd
UUID: 04c1426c_e010f6cc
Bytes: 168
I can't get that to work correctly. However, I changed to the class+operator() version of the deleter, to get rid of the instance (as the deleter is stateless anyways).

131:70-131:92
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 644d9e85_939fbe9c
Bytes: 28
Why? it's already templated.

131:70-131:92
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 644d9e85_939fbe9c
UUID: c4ef2afe_463fcb7a
Bytes: 10
See above.

133:48-133:53
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 64159e82_d15e175d
Bytes: 17
dex_file->Begin()

133:48-133:53
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 64159e82_d15e175d
UUID: 44cedaa4_377f52ed
Bytes: 44
Done. (Leftover from pre-unique_ptr attempt)

137
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 6492fe15_cb133421
Bytes: 31
dex_file->Begin,
dex_file->Size

137
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 6492fe15_cb133421
UUID: 244c8613_7b159f75
Bytes: 4
Done

152
Fri Sep 04 22:22:41 2015 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 84529221_aac46b2b
Bytes: 7
static?

152
Wed Sep 09 01:30:33 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 84529221_aac46b2b
UUID: 84d4522f_7cbdb13b
Bytes: 4
Done

