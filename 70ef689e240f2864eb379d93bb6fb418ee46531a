Revision: 70ef689e240f2864eb379d93bb6fb418ee46531a
Patch-set: 2
File: runtime/verifier/method_verifier.cc

1775:25-1775:82
Wed Jun 24 17:44:38 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: de761212_49aaa58d
Bytes: 85
I think the VerifyRegisterType() also needs an update to hard-fail for UndefinedType.

1775:25-1775:82
Wed Jun 24 17:57:17 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: de761212_49aaa58d
UUID: befddec1_85b82236
Bytes: 122
Don't think so. UndefinedType and ConflictType are not a category2 type, so they fail in line 1771. Same for the non-wide.

1775:25-1775:82
Wed Jun 24 18:07:14 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: befddec1_85b82236
UUID: 9eb57afa_1f7467ac
Bytes: 249
Line 1771 is a failure for the return_type but I want a hard failure for the vregA. But I think we're OK in RegisterLine::VerifyRegisterType() because we select hard failure based on

    if (!check_type.IsNonZeroReferenceTypes() || <unimportant>) {

1799:0-1802:86
Wed Jun 24 17:44:38 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 1ea26abf_832140d9
Bytes: 147
I think this should be checked before reg_type.IsUninitializedTypes() but in practice I guess an uninitialized type is never undefined or conflict.

1799:0-1802:86
Wed Jun 24 17:57:17 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1ea26abf_832140d9
UUID: 1e098aaf_684bc3db
Bytes: 99
Sure, I can reorder that to be at the top-level. It is correct as-is, but maybe not the best order.

File: test/800-smali/smali/b_22045582.smali

12:4-12:17
Wed Jun 24 17:44:38 2015 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 9eb57afa_dfa4bfc3
Bytes: 52
Can you add extra tests with return and return-wide?

12:4-12:17
Wed Jun 24 17:57:58 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 9eb57afa_dfa4bfc3
UUID: 1e098aaf_88ea7722
Bytes: 8
Will do.

