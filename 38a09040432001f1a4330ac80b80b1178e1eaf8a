Revision: 38a09040432001f1a4330ac80b80b1178e1eaf8a
Patch-set: 3
File: compiler/dex/frontend.cc

786:28-786:63
Thu Aug 14 09:23:18 2014 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 1630777d_4acc83f2
Bytes: 125
PrettyMethod() is pretty expensive. We should avoid it as long as we don't need it. For example if we don't have the profile.

786:28-786:63
Thu Aug 14 10:13:00 2014 +0000
Author: Calin Juravle <1022077@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1630777d_4acc83f2
UUID: 1630777d_2a33472d
Bytes: 192
If you look closely at the flow, this is used in many other places. Thus I moved it here to compute the name just once. In particular, the profile usage was guarded by ProfilePresent() anyway.

786:28-786:63
Thu Aug 14 10:25:49 2014 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1630777d_2a33472d
UUID: f62cc32f_e44584d7
Bytes: 294
If you look closely at the flow, it's been used in paths we usually don't reach, i.e. debug info when we abort or under use_match or gVerboseMethods, or tracking memory usage, ... and now with the profile as well.

It's not that difficult to write a little helper class LazyMethodName for this.

786:28-786:63
Thu Aug 14 10:31:10 2014 +0000
Author: Calin Juravle <1022077@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: f62cc32f_e44584d7
UUID: f62cc32f_4461d85e
Bytes: 175
Oki, my bad. I did't take into account the verbosity level which is usually pretty low. I can patch this to use a lazy computation or just re-inlined it. Could you open a bug?

