Revision: b5fdebcc1fd657ac0658fa565a0a603be5b336df
Patch-set: 1
File: /COMMIT_MSG

9:0-10:44
Wed Jul 15 10:25:29 2015 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 18f0c2db_50bf8ca9
Bytes: 160
How about always allocating 4 bytes in the stack (alongside the lambda) to point to that boxed lambda? It would be initialized to null when creating the lambda.

File: runtime/lambda/box_table.cc

64:7-64:18
Wed Jul 15 15:21:56 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 3837466d_a1cd3e2b
Bytes: 104
What other errors do you expect? Otherwise, check for OOM explicitly (there is an Assert..., I believe)?

132:2-132:8
Wed Jul 15 01:38:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 78b0de09_8abcb326
Bytes: 16
ATTRIBUTE_UNUSED

128:0-135:1
Wed Jul 15 15:21:56 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5834fa65_221a8e75
Bytes: 17
What is this for?

147:2-147:39
Wed Jul 15 01:38:24 2015 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 187d22ed_5c8b3d76
Bytes: 118
You can use the it = set->Erase(it) to avoid needing to construct the remove_list. See InternTable::Table::SweepWeaks.

File: runtime/lambda/box_table.h

28:18-28:40
Wed Jul 15 15:21:56 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: f8404ed5_bfb0f7fc
Bytes: 60
Unusual to add this comment. You did not add it to Object...

47:2-51:50
Wed Jul 15 15:21:56 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 3837466d_21e28e9c
Bytes: 58
LOCKS_EXCLUDED(lambd_table_lock_), maybe? Similarly below?

61:2-61:53
Wed Jul 15 15:21:56 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 5834fa65_827cba95
Bytes: 38
Stale comment? Otherwise a TODO maybe?

69:0-69:0
Wed Jul 15 15:21:56 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 183e024a_20792aa4
Bytes: 71
Mathieu will be impressed with your vertical whitespace. Why two lines?

91:2-91:55
Wed Jul 15 15:21:56 2015 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 183e024a_e0fb4289
Bytes: 70
Maybe a short explanation of why you set it to half the regular value?

